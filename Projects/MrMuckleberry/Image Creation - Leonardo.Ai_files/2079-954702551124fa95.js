try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="219247ba-7226-4882-9e12-d9aa3d6e3778",e._sentryDebugIdIdentifier="sentry-dbid-219247ba-7226-4882-9e12-d9aa3d6e3778")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2079],{1107:(e,t,n)=>{n.d(t,{a:()=>i});var a=n(65352),r=n(49011);let i=(e,t)=>(0,a.d4)(r.$,e,t)},12643:(e,t,n)=>{n.d(t,{T:()=>r,z:()=>i});var a=n(78203);function r(e){let{width:t,height:n,alchemy:r,ultra:i,imageSize:s,modelVersion:l}=e;if(!s)return[t,n];let o=(0,a.Zk)(l)[s];if(i&&o.ultraMultiplier){let e=o.ultraMultiplier;return[t*e,n*e]}if(r){let e=o.upscaleMultiplier;return[t*e,n*e]}return[t,n]}function i(e){return"Low"===e?1:"Medium"===e?4:"High"===e?7:void 0}},13801:(e,t,n)=>{n.d(t,{Co:()=>p,Ig:()=>u,Nz:()=>s,_Q:()=>i,w8:()=>o,xS:()=>l});var a=n(3711),r=n.n(a);function i(e,t,n){return(null==e?void 0:e.length)?null==e?void 0:e.map(e=>e.id===t.id?{...e,weight:n}:e):null}function s(e,t){var n;return(null==e?void 0:e.length)&&null!==(n=null==e?void 0:e.filter(e=>e.id!==t.id))&&void 0!==n?n:null}function l(e,t){var n;return(null==e?void 0:e.length)&&null!==(n=null==e?void 0:e.map(e=>e.id===t.id?{...e,isDisabled:!e.isDisabled}:e))&&void 0!==n?n:null}function o(e,t){return(null==e?void 0:e.length)&&(null==t?void 0:t.length)?null==e?void 0:e.reduce((e,n)=>{let a=t.find(e=>e.id===n.id);return a&&e.push({...a,...n}),e},[]):[]}function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t;return n&&(a=[...null!=e?e:[],...t]),r()(a,"id")}function p(e){var t;return(null==e?void 0:e.length)&&null!==(t=e.filter(e=>!e.isDisabled).map(e=>({id:e.id,weight:e.weight,isEnabled:!0})))&&void 0!==t?t:null}},17403:(e,t,n)=>{n.d(t,{f:()=>a});let a=.5},35519:(e,t,n)=>{n.d(t,{f:()=>o});var a=n(65352),r=n(42380),i=n(78203),s=n(49011),l=n(14331);let o=()=>{let e=(0,a.d4)(s.$,e=>e.context.aspectRatio),t=(0,a.d4)(s.$,e=>e.context.namedAspectRatioKey),n=(0,a.d4)(s.$,e=>e.context.imageSize),o=(0,a.d4)(s.$,e=>e.context.customWidth),u=(0,a.d4)(s.$,e=>e.context.customHeight),p=(0,a.d4)(s.$,e=>e.context.isUsingCustomResolution),{hasPermission:d}=(0,l.S)(),m=d("generationAspectRatioPremium","create"),g=d("generationImageResolutionPremium","create"),{modelInfo:c}=(0,r.R)(),v=c.sdVersion,[y,I]=(0,i.Nt)({aspectRatio:e,imageSize:n,modelVersion:v});return{aspectRatio:e,namedAspectRatioKey:t,width:p?o:y,height:p?u:I,calculatedWidth:y,calculatedHeight:I,customWidth:o,customHeight:u,imageSize:n,isUsingCustomResolution:p,inputImageSize:e=>{s.$.send({type:"input.imageSize",params:{imageSize:e,isUserFreePlan:!g}})},inputAspectRatio:e=>{s.$.send({type:"input.aspectRatio",params:{aspectRatio:e,isUserFreePlan:!m}})},inputNamedAspectRatio:e=>{s.$.send({type:"input.aspectRatio.named",params:{namedAspectRatioKey:e,isUserFreePlan:!m}})},inputCustomResolution:(e,t)=>{s.$.send({type:"input.customResolution",params:{width:e,height:t,isUserFreePlan:!g}})},inputIsUsingCustomResolution:e=>{s.$.send({type:"input.toggleIsUsingCustomResolution",params:{isUsingCustomResolution:e,isUserFreePlan:!g}})}}}},42380:(e,t,n)=>{n.d(t,{R:()=>i});var a=n(54646),r=n(68691);let i=()=>{let{modelId:e}=(0,a.G)(),t=(0,r.G)(e=>e.generation.modelInfo.modelInfoMap)[e],n=null==t?void 0:t.sdVersion;return{modelInfo:t,modelVersion:n}}},43195:(e,t,n)=>{n.d(t,{Db:()=>u,M4:()=>s,Ry:()=>i,TX:()=>o,aN:()=>p,wR:()=>l});var a=n(3711),r=n.n(a);function i(e,t,n){return(null==e?void 0:e.length)?null==e?void 0:e.map(e=>e.id===t.id?{...e,weight:n}:e):null}function s(e,t){var n;return(null==e?void 0:e.length)&&null!==(n=null==e?void 0:e.filter(e=>e.id!==t.id))&&void 0!==n?n:null}function l(e,t){var n;return(null==e?void 0:e.length)&&null!==(n=null==e?void 0:e.map(e=>e.id===t.id?{...e,isDisabled:!e.isDisabled}:e))&&void 0!==n?n:null}function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t;return n&&(a=[...null!=e?e:[],...t]),r()(a,"id")}function u(e){var t;return(null==e?void 0:e.length)&&null!==(t=e.filter(e=>!e.isDisabled).map(e=>({id:e.id,weight:e.weight,isEnabled:!0})))&&void 0!==t?t:null}function p(e,t){return e.filter(e=>t.some(t=>t.id===e.id))}},49011:(e,t,n)=>{n.d(t,{$:()=>b});var a,r=n(29319),i=n(31481),s=n(30208),l=n(96729),o=n(80898),u=n(52592),p=n(35936),d=n(31698);let m=e=>{let{context:t}=e;return!((0,p.L7)(t.modelVersion)||(0,p.vT)(t.modelVersion)||(0,p.Ye)(t.modelVersion))};var g=n(89239),c=n(33383);let v=e=>(0,p.CV)(e.modelVersion)?{transparency:!1}:(0,p.L7)(e.modelVersion)||(0,p.vT)(e.modelVersion)?{transparency:!1,photoReal:!1}:(0,p.Ye)(e.modelVersion)?{photoReal:!1}:{},y=e=>e.alchemy?{}:{photoReal:!1};var I=n(13801),h=n(43195),U=n(72681);let f=(0,s.mj)({types:{},guards:{isAlchemyOn:e=>{let{context:t}=e;return t.alchemy},isGenerationModeQuality:(0,r.H)({generationMode:"quality"}),isGenerationModeUltra:(0,r.H)({generationMode:"ultra"}),canUsePremium:e=>{var t;let{event:n}=e;return!(null===(t=n.params)||void 0===t?void 0:t.isUserFreePlan)},canChangePrivate:(e,t)=>!t.isUserFreePlan,canImprovePrompt:e=>{let{context:t}=e;return!!t.prompt&&0!==t.prompt.trim().length&&t.prompt.length>0&&t.prompt.length<=c.Ey},canDescribeImage:(0,r.F)("generatingPrompt"),canUseAspectRatio:(e,t)=>!t.isUserFreePlan||"2.4:1"!==t.aspectRatio,canUseAspectRatioNamed:(e,t)=>!t.isUserFreePlan||"wide"!==t.namedAspectRatioKey,canUseControlNets:e=>{let{context:t}=e;return!(0,p.CV)(t.modelVersion)},canUseCharacterReference:e=>{var t,n;let{context:a,event:r}=e,i=null!==(n=a.modelVersion)&&void 0!==n?n:null,s={controlnetType:u.bd.FaceTransfer},l={isCharacterReferenceForPhoenixEnabled:null===(t=r.params)||void 0===t?void 0:t.isCharacterReferenceForPhoenixEnabled};return(0,p.Kw)(s,i,a.imageGuidanceInputs,l).value},canUseContentReference:e=>{var t,n,a;let{context:r,event:i}=e,s=null!==(a=r.modelVersion)&&void 0!==a?a:null,l={controlnetType:u.bd.ContentTransfer},o={isContentReferenceForFluxEnabled:null===(t=i.params)||void 0===t?void 0:t.isContentReferenceForFluxEnabled,isContentReferenceForPhoenixEnabled:null===(n=i.params)||void 0===n?void 0:n.isContentReferenceForPhoenixEnabled};return(0,p.Kw)(l,s,r.imageGuidanceInputs,o).value},canUseDepthToImage:e=>{var t;let{context:n}=e,a=null!==(t=n.modelVersion)&&void 0!==t?t:null,r={controlnetType:u.bd.Depth};return(0,p.Kw)(r,a,n.imageGuidanceInputs,{}).value},canUseEdgeToImage:e=>{var t;let{context:n}=e,a=null!==(t=n.modelVersion)&&void 0!==t?t:null,r={controlnetType:u.bd.Canny};return(0,p.Kw)(r,a,n.imageGuidanceInputs,{}).value},canUsePoseToImage:e=>{var t;let{context:n}=e,a=null!==(t=n.modelVersion)&&void 0!==t?t:null,r={controlnetType:u.bd.OpenPose};return(0,p.Kw)(r,a,n.imageGuidanceInputs,{}).value},canUseStyleReference:e=>{var t,n;let{context:a,event:r}=e,i=null!==(n=a.modelVersion)&&void 0!==n?n:null,s={controlnetType:u.bd.StyleTransfer},l={isStyleReferenceForFluxEnabled:null===(t=r.params)||void 0===t?void 0:t.isStyleReferenceForFluxEnabled};return(0,p.Kw)(s,i,a.imageGuidanceInputs,l).value},canUseTextImageInput:e=>{var t;let{context:n}=e,a=null!==(t=n.modelVersion)&&void 0!==t?t:null,r={controlnetType:u.bd.Text};return(0,p.Kw)(r,a,n.imageGuidanceInputs,{}).value},canUseCustomResolutions:(e,t)=>!t.isUserFreePlan,canUseElements:e=>{let{context:t}=e;return!((0,p.CV)(t.modelVersion)||(0,p.QB)(t.modelVersion))},canUseUserElements:e=>{let{context:t}=e;return!((0,p.CV)(t.modelVersion)||(0,p.L7)(t.modelVersion)||(0,p.QB)(t.modelVersion))},canUseImageSize:(e,t)=>!t.isUserFreePlan||"High"!==t.imageSize,canUseImageToImage:e=>{var t,n;let{context:a,event:r}=e,i=null!==(n=a.modelVersion)&&void 0!==n?n:null,s={akUUID:d.w.Img2Img},l={isImageToImageForFluxEnabled:null===(t=r.params)||void 0===t?void 0:t.isImageToImageForFluxEnabled};return(0,p.Kw)(s,i,a.imageGuidanceInputs,l).value},canUseNegativePrompt:e=>{let{context:t}=e;return!(0,p.vT)(t.modelVersion)},canUsePhotoReal:m,canUsePromptEnhance:e=>{let{context:t}=e;return!!((0,p.CV)(t.modelVersion)||(0,p.L7)(t.modelVersion)||(0,p.vT)(t.modelVersion))},canUseTransparency:e=>{let{context:t}=e;return!((0,p.CV)(t.modelVersion)||(0,p.L7)(t.modelVersion)||(0,p.vT)(t.modelVersion))},canUseTiling:e=>{let{context:t}=e;return!((0,p.CV)(t.modelVersion)||(0,p.vT)(t.modelVersion))},generatingPrompt:(0,r.G)([(0,r.H)({promptGenerate:"generating"}),(0,r.H)({describeImage:"generating"})]),hasValidPrompt:e=>{let{context:t}=e;return!!t.prompt&&0!==t.prompt.trim().length&&t.prompt.length>0&&t.prompt.length<=i.generationDefaults.prompt.max},isValidModel:e=>{var t;let{event:n}=e;return(0,p.ef)(null===(t=n.params)||void 0===t?void 0:t.modelVersion)},canSubmit:(0,r.E)(["hasValidPrompt",(0,r.F)("generatingPrompt")]),canSubmitWithPromptEnhance:(0,r.F)("generatingPrompt"),canUseContrast:e=>{let{context:t}=e;return!(0,p.vT)(t.modelVersion)},canUseQualityGenerationMode:e=>{let{context:t}=e;return!(0,p.vT)(t.modelVersion)},canUseUltraGenerationMode:e=>{var t;let{context:n}=e,a=null==n?void 0:null===(t=n.preset)||void 0===t?void 0:t.modelId,r=[i.MODEL_IDS.PHOENIX_0_9_4,i.MODEL_IDS.PHOENIX,i.MODEL_IDS.FLUX_DEV,i.MODEL_IDS.FLUX_SCHNELL];return!!((0,p.TC)(a)&&r.includes(a))}},actions:{setAlchemy:(0,l.a)({alchemy:(e,t)=>"boolean"==typeof t.alchemy&&t.alchemy,photoReal:(e,t)=>{var n;let{context:a,event:r}=e;if(!m({context:a,event:r}))return!1;let i=null===(n=a.preset)||void 0===n?void 0:n.payload.generationSettings.photoReal;return!!t.alchemy&&i}}),setUltraUpscaler:(0,l.a)({ultra:(e,t)=>t.ultra,alchemy:!1,photoReal:!1}),setContrast:(0,l.a)({contrast:(e,t)=>t.contrast}),setAspectRatio:(0,l.a)({aspectRatio:(e,t)=>t.aspectRatio,namedAspectRatioKey:null}),setNamedAspectRatio:(0,l.a)({namedAspectRatioKey:(e,t)=>t.namedAspectRatioKey}),setCustomResolution:(0,l.a)((e,t)=>{let{width:n,height:a}=t;return{customWidth:n,customHeight:a}}),setIsUsingCustomResolution:(0,l.a)({isUsingCustomResolution:(e,t)=>t.isUsingCustomResolution}),setImageSize:(0,l.a)({imageSize:(e,t)=>t.imageSize}),setModel:(0,l.a)((e,t)=>{let{context:n}=e,{modelId:a,modelVersion:r}=t;return{modelId:"string"==typeof a?a:n.modelId,modelVersion:r}}),setNegativePrompt:(0,l.a)({negativePrompt:(e,t)=>t.negativePrompt}),setNegativePromptOpen:(0,l.a)({negativePromptOpen:(e,t)=>t.negativePromptOpen}),setNumberOfImages:(0,l.a)({numberOfImages:(e,t)=>t.numberOfImages}),setPhotoReal:(0,l.a)({photoReal:(e,t)=>"boolean"==typeof t.photoReal&&t.photoReal}),setPhotoRealIfValid:(0,l.a)({photoReal:(e,t)=>{let{context:n}=e;return"boolean"!=typeof t.photoReal?n.photoReal:!!n.alchemy&&t.photoReal}}),setPrivate:(0,l.a)({private:(e,t)=>{let{context:n}=e;return"boolean"==typeof t.private?t.private:!n.private}}),setPrompt:(0,l.a)({prompt:(e,t)=>t.prompt||""}),setPromptEnhance:(0,l.a)({promptEnhance:(e,t)=>t.promptEnhance}),setPreset:(0,l.a)({preset:(e,t)=>t.preset}),setPresetId:(0,l.a)({presetId:(e,t)=>t.presetId}),setStyleId:(0,l.a)({styleId:(e,t)=>t.styleId}),setTiling:(0,l.a)({tiling:(e,t)=>"boolean"==typeof t.tiling&&t.tiling}),setTransparency:(0,l.a)({transparency:(e,t)=>"boolean"==typeof t.transparency&&t.transparency}),setFixedSeed:(0,l.a)({fixedSeed:(e,t)=>t.fixedSeed}),setFixedSeedEnabled:(0,l.a)({fixedSeedEnabled:(e,t)=>t.fixedSeedEnabled}),validateModel:(0,l.a)(e=>{let{context:t}=e;return v(t)}),validatePhotoReal:(0,l.a)(e=>{let{context:t}=e;return y(t)}),setElements:(0,l.a)((e,t)=>{let{context:n}=e;return{elements:(0,I.Ig)(n.elements,t.elements,t.append)}}),setElementStrength:(0,l.a)((e,t)=>{let{context:n}=e;return{elements:(0,I._Q)(n.elements,t.element,t.strength)}}),removeElement:(0,l.a)((e,t)=>{let{context:n}=e,{element:a}=t;return{elements:(0,I.Nz)(n.elements,a)}}),toggleDisableElement:(0,l.a)((e,t)=>{let{context:n}=e,{element:a}=t;return{elements:(0,I.xS)(n.elements,a)}}),setUserElements:(0,l.a)((e,t)=>{let{context:n}=e;return{userElements:(0,h.TX)(n.userElements,t.elements,t.append)}}),setUserElementStrength:(0,l.a)((e,t)=>{let{context:n}=e;return{userElements:(0,h.Ry)(n.userElements,t.element,t.strength)}}),removeStyleTransferImageGuidance:(0,l.a)(e=>{var t;let{context:n}=e;return{imageGuidanceInputs:(null===(t=n.imageGuidanceInputs)||void 0===t?void 0:t.length)?n.imageGuidanceInputs.filter(e=>(null==e?void 0:e.controlnetType)!==u.bd.StyleTransfer):null}}),removeUserElement:(0,l.a)((e,t)=>{let{context:n}=e,{element:a}=t;return{userElements:(0,h.M4)(n.userElements,a)}}),toggleDisableUserElement:(0,l.a)((e,t)=>{let{context:n}=e,{element:a}=t;return{userElements:(0,h.wR)(n.userElements,a)}}),inputImageGuidance:(0,l.a)({imageGuidanceInputs:(e,t)=>t.inputs}),setImageGuidanceStrength:(0,l.a)((e,t)=>{let{context:n}=e,{input:a,strength:r}=t;return{imageGuidanceInputs:(0,U.LO)(n.imageGuidanceInputs,a,r)}}),setImageGuidanceStrengthType:(0,l.a)((e,t)=>{let{context:n}=e,{input:a,strengthType:r}=t;return{imageGuidanceInputs:(0,U.bQ)(n.imageGuidanceInputs,a,r)}}),setImageGuidanceInfluence:(0,l.a)((e,t)=>{let{context:n}=e,{input:a,influence:r}=t;return{imageGuidanceInputs:(0,U.Nc)(n.imageGuidanceInputs,a,r)}}),removeImageGuidance:(0,l.a)((e,t)=>{let{context:n}=e,{input:a}=t;return{imageGuidanceInputs:(0,U.Ce)(n.imageGuidanceInputs,a),imageGuidancePendingInputExistingId:null}}),toggleDisableGuidance:(0,l.a)((e,t)=>{let{context:n}=e,{input:a}=t;return{imageGuidanceInputs:(0,U.xU)(n.imageGuidanceInputs,a)}}),resetDefaults:(0,l.a)({aspectRatio:null===c.KY||void 0===c.KY?void 0:c.KY.aspectRatio,contrast:null===c.KY||void 0===c.KY?void 0:c.KY.contrast,elements:null===c.KY||void 0===c.KY?void 0:c.KY.elements,fixedSeed:null===c.KY||void 0===c.KY?void 0:c.KY.fixedSeed,fixedSeedEnabled:null===c.KY||void 0===c.KY?void 0:c.KY.fixedSeedEnabled,imageGuidanceInputs:null===c.KY||void 0===c.KY?void 0:c.KY.imageGuidanceInputs,imageSize:null===c.KY||void 0===c.KY?void 0:c.KY.imageSize,namedAspectRatioKey:null===c.KY||void 0===c.KY?void 0:c.KY.namedAspectRatioKey,negativePrompt:null!==(a=null===c.KY||void 0===c.KY?void 0:c.KY.negativePrompt)&&void 0!==a?a:"",negativePromptOpen:null===c.KY||void 0===c.KY?void 0:c.KY.negativePromptOpen,numberOfImages:null===c.KY||void 0===c.KY?void 0:c.KY.numberOfImages}),reset:(0,l.b)(e=>{let{enqueue:t}=e;t.assign({...c.KY,preset:void 0}),t.raise({type:"generationMode.inputFast"})})},actors:{fetchDescription:(0,o.Sx)(async e=>{let{input:t}=e;return(0,g.p)(t)})}}).createMachine({id:"imageGeneration",type:"parallel",context:{...c.KY},on:{"input.contrast":{guard:{type:"canUseContrast"},actions:{type:"setContrast",params:e=>{let{event:t}=e;return{contrast:t.params.contrast}}}},"input.aspectRatio":{guard:{type:"canUseAspectRatio",params:e=>{let{event:t}=e;return{aspectRatio:t.params.aspectRatio,isUserFreePlan:t.params.isUserFreePlan}}},actions:[{type:"setAspectRatio",params:e=>{let{event:t}=e;return{aspectRatio:t.params.aspectRatio}}},{type:"setIsUsingCustomResolution",params:()=>({isUsingCustomResolution:!1})}]},"input.aspectRatio.named":{guard:{type:"canUseAspectRatioNamed",params:e=>{let{event:t}=e;return{namedAspectRatioKey:t.params.namedAspectRatioKey,isUserFreePlan:t.params.isUserFreePlan}}},actions:[{type:"setNamedAspectRatio",params:e=>{let{event:t}=e;return{namedAspectRatioKey:t.params.namedAspectRatioKey}}}]},"input.customResolution":{guard:{type:"canUseCustomResolutions",params:e=>{let{event:t}=e;return{isUserFreePlan:t.params.isUserFreePlan}}},actions:[{type:"setCustomResolution",params:e=>{let{event:t}=e;return{width:t.params.width,height:t.params.height}}},{type:"setIsUsingCustomResolution",params:()=>({isUsingCustomResolution:!0})}]},"input.toggleIsUsingCustomResolution":{guard:{type:"canUseCustomResolutions",params:e=>{let{event:t}=e;return{isUserFreePlan:t.params.isUserFreePlan}}},actions:[{type:"setIsUsingCustomResolution",params:e=>{let{event:t}=e;return{isUsingCustomResolution:t.params.isUsingCustomResolution}}}]},"input.imageSize":{guard:{type:"canUseImageSize",params:e=>{let{event:t}=e;return{imageSize:t.params.imageSize,isUserFreePlan:t.params.isUserFreePlan}}},actions:[{type:"setImageSize",params:e=>{let{event:t}=e;return{imageSize:t.params.imageSize}}},{type:"setIsUsingCustomResolution",params:()=>({isUsingCustomResolution:!1})}]},"input.model":{guard:"isValidModel",actions:[{type:"setModel",params:e=>{let{event:t}=e;return{modelId:t.params.modelId,modelVersion:t.params.modelVersion}}},{type:"validateModel"}]},"input.negativePrompt":{guard:"canUseNegativePrompt",actions:{type:"setNegativePrompt",params:e=>{let{event:t}=e;return{negativePrompt:t.params.negativePrompt}}}},"input.negativePromptOpen":{guard:"canUseNegativePrompt",actions:{type:"setNegativePromptOpen",params:e=>{let{event:t}=e;return{negativePromptOpen:t.params.negativePromptOpen}}}},"input.numberOfImages":{actions:{type:"setNumberOfImages",params:e=>{let{event:t}=e;return{numberOfImages:t.params.numberOfImages,isUserFreePlan:t.params.isUserFreePlan}}}},"input.photoReal":{guard:"canUsePhotoReal",actions:(0,l.b)(e=>{let{enqueue:t,event:n}=e;n.params.photoReal&&t.raise({type:"generationMode.inputQuality",params:{isUserFreePlan:!!(null==n?void 0:n.params.isPhotoRealAllowed)}}),t({type:"setPhotoReal",params:{photoReal:n.params.photoReal}})})},"input.setPhotoRealIfValid":{guard:{type:"canUsePhotoReal"},actions:[{type:"setPhotoRealIfValid",params:e=>{let{event:t}=e;return{photoReal:t.params.photoReal}}}]},"input.preset":{actions:(0,l.b)(e=>{let{enqueue:t,context:n,check:a,event:r}=e,{preset:s}=r.params;a("isGenerationModeUltra")&&!a("canUseUltraGenerationMode")&&t.raise({type:"generationMode.inputFast"}),t({type:"setPreset",params:e=>{let{event:t}=e;return{preset:t.params.preset}}});let l=(null==s?void 0:s.modelId)===i.MODEL_IDS.PHOENIX,o=(null==s?void 0:s.modelId)===i.MODEL_IDS.FLUX_DEV||(null==s?void 0:s.modelId)===i.MODEL_IDS.FLUX_SCHNELL;l&&!1===r.params.isPhoenixStyleTransferAllowed&&t({type:"removeStyleTransferImageGuidance"}),!l&&!o&&a("isGenerationModeUltra")&&t.raise({type:"generationMode.inputFast"}),o&&(a("isGenerationModeQuality")||a("isGenerationModeUltra"))&&t.raise({type:"generationMode.inputFast"})})},"input.presetId":{actions:{type:"setPresetId",params:e=>{let{event:t}=e;return{presetId:t.params.presetId}}}},"input.prompt":{actions:{type:"setPrompt",params:e=>{let{event:t}=e;return{prompt:t.params.prompt}}}},"input.promptEnhance":{guard:{type:"canUsePromptEnhance"},actions:{type:"setPromptEnhance",params:e=>{let{event:t}=e;return{promptEnhance:t.params.promptEnhance}}}},"input.private":{guard:{type:"canChangePrivate",params:e=>{let{event:t}=e;return{isUserFreePlan:t.params.isUserFreePlan,isUsingTeamAccount:t.params.isUsingTeamAccount}}},actions:{type:"setPrivate",params:e=>{let{event:t}=e;return{isUserFreePlan:t.params.isUserFreePlan,private:t.params.private}}}},"input.styleId":{actions:{type:"setStyleId",params:e=>{let{event:t}=e;return{styleId:t.params.styleId}}}},"input.tiling":{guard:{type:"canUseTiling"},actions:{type:"setTiling",params:e=>{let{event:t}=e;return{tiling:t.params.tiling}}}},"input.transparency":{guard:{type:"canUseTransparency"},actions:{type:"setTransparency",params:e=>{let{event:t}=e;return{transparency:t.params.transparency}}}},"input.userElements":{guard:{type:"canUseUserElements"},actions:{type:"setUserElements",params:e=>{let{event:t}=e;return{elements:t.params.elements,append:t.params.append}}}},"input.userElements.strength":{actions:{type:"setUserElementStrength",params:e=>{let{event:t}=e;return{element:t.params.element,strength:t.params.strength}}}},"input.userElements.remove":{actions:{type:"removeUserElement",params:e=>{let{event:t}=e;return{element:t.params.element}}}},"input.userElements.toggleDisabled":{actions:{type:"toggleDisableUserElement",params:e=>{let{event:t}=e;return{element:t.params.element}}}},"input.elements":{guard:{type:"canUseElements"},actions:{type:"setElements",params:e=>{let{event:t}=e;return{elements:t.params.elements,append:t.params.append}}}},"input.elements.strength":{actions:{type:"setElementStrength",params:e=>{let{event:t}=e;return{element:t.params.element,strength:t.params.strength}}}},"input.elements.remove":{actions:{type:"removeElement",params:e=>{let{event:t}=e;return{element:t.params.element}}}},"input.elements.toggleDisabled":{actions:{type:"toggleDisableElement",params:e=>{let{event:t}=e;return{element:t.params.element}}}},"input.imageToImage":{guard:(0,r.G)(["canUseImageToImage","canUseControlNets"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs,isImageToImageForFluxEnabled:t.params.isImageToImageForFluxEnabled}}}},"input.imageGuidance":{guard:"canUseControlNets",actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs}}}},"input.imageGuidance.characterReference":{guard:(0,r.E)(["canUseControlNets","canUseCharacterReference"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs,isCharacterReferenceForPhoenixEnabled:t.params.isCharacterReferenceForPhoenixEnabled}}}},"input.imageGuidance.contentReference":{guard:(0,r.E)(["canUseControlNets","canUseContentReference"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs,isContentReferenceForFluxEnabled:t.params.isContentReferenceForFluxEnabled,isContentReferenceForPhoenixEnabled:t.params.isContentReferenceForPhoenixEnabled}}}},"input.imageGuidance.depthToImage":{guard:(0,r.E)(["canUseControlNets","canUseDepthToImage"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs}}}},"input.imageGuidance.edgeToImage":{guard:(0,r.E)(["canUseControlNets","canUseEdgeToImage"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs}}}},"input.imageGuidance.poseToImage":{guard:(0,r.E)(["canUseControlNets","canUsePoseToImage"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs}}}},"input.imageGuidance.styleReference":{guard:(0,r.E)(["canUseControlNets","canUseStyleReference"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs,isStyleReferenceForFluxEnabled:t.params.isStyleReferenceForFluxEnabled}}}},"input.imageGuidance.textImageInput":{guard:(0,r.E)(["canUseControlNets","canUseTextImageInput"]),actions:{type:"inputImageGuidance",params:e=>{let{event:t}=e;return{inputs:t.params.inputs}}}},"input.imageGuidance.strength":{actions:{type:"setImageGuidanceStrength",params:e=>{let{event:t}=e;return{input:t.params.input,strength:t.params.strength}}}},"input.imageGuidance.strengthType":{actions:{type:"setImageGuidanceStrengthType",params:e=>{let{event:t}=e;return{input:t.params.input,strengthType:t.params.strengthType}}}},"input.imageGuidance.influence":{actions:{type:"setImageGuidanceInfluence",params:e=>{let{event:t}=e;return{input:t.params.input,influence:t.params.influence}}}},"input.imageGuidance.remove":{actions:{type:"removeImageGuidance",params:e=>{let{event:t}=e;return{input:t.params.input}}}},"input.imageGuidance.toggleDisabled":{actions:{type:"toggleDisableGuidance",params:e=>{let{event:t}=e;return{input:t.params.input}}}},"input.fixedSeed":{actions:{type:"setFixedSeed",params:e=>{let{event:t}=e;return{fixedSeed:t.params.fixedSeed}}}},"input.fixedSeedEnabled":{actions:{type:"setFixedSeedEnabled",params:e=>{let{event:t}=e;return{fixedSeedEnabled:t.params.fixedSeedEnabled}}}},"input.resetDefaults":{actions:{type:"resetDefaults"}},"input.reset":{actions:{type:"reset"}}},states:{form:{initial:"submitDisabled",states:{submitDisabled:{},submitEnabled:{}},always:[{guard:"canSubmit",target:".submitEnabled"},{guard:(0,r.F)("canSubmit"),target:".submitDisabled"}]},promptGenerate:{initial:"idle",states:{failure:{after:{delay:2500,target:"idle"}},idle:{on:{"promptGenerate.improve":{guard:"canImprovePrompt",target:"generating",actions:(0,l.a)({promptSource:i.PromptSource.IMPROVE})},"promptGenerate.random":{target:"generating",actions:(0,l.a)({promptSource:i.PromptSource.RANDOM})},"promptGenerate.aiEnhance":{target:"generating",actions:(0,l.a)({promptSource:i.PromptSource.ENHANCE})}}},generating:{on:{"promptGenerate.fail":"failure","promptGenerate.success":"idle"}}}},generate:{initial:"idle",states:{failure:{after:{delay:2500,target:"idle"},on:{"generate.generate":{guard:"canSubmit",target:"generating"}}},idle:{on:{"generate.generate":{guard:"canSubmit",target:"generating"},"generate.regenerate":{guard:"canSubmitWithPromptEnhance",target:"generating"}}},generating:{on:{"generate.fail":{target:"failure"},"generate.generate":{guard:"canSubmit"},"generate.success":{target:"idle"}}}}},describeImage:{initial:"idle",states:{idle:{on:{"describeImage.generate":{target:"generating",guard:"canDescribeImage"}}},generating:{invoke:{id:"fetchDescription",src:"fetchDescription",input:e=>{var t;let{event:n}=e;return null===(t=n.params)||void 0===t?void 0:t.selectedImage},onDone:{target:"success",actions:(0,l.a)({prompt:e=>{let{event:t}=e;return t.output},promptSource:i.PromptSource.DESCRIBE})},onError:{target:"failure",actions:(0,l.a)({describeImageError:e=>{let{event:t}=e;return t.error instanceof Error?t.error:Error("Sorry! Something went wrong, please try again.")}})}}},success:{on:{"describeImage.generate":{target:"generating"}}},failure:{on:{"describeImage.generate":{target:"generating"}}}}},generationMode:{initial:"fast",states:{fast:{entry:{type:"setAlchemy",params:{alchemy:!1}},on:{"generationMode.inputQuality":[{guard:"isAlchemyOn",target:"fast"},{guard:(0,r.E)(["canUsePremium","canUseQualityGenerationMode"]),target:"quality"}],"generationMode.inputUltra":{guard:"canUseUltraGenerationMode",target:"ultra"}}},quality:{entry:{type:"setAlchemy",params:{alchemy:!0}},on:{"generationMode.inputFast":{target:"fast"},"generationMode.inputQuality":{target:"quality"},"generationMode.inputUltra":{guard:"canUseUltraGenerationMode",target:"ultra"}}},ultra:{entry:{type:"setUltraUpscaler",params:{ultra:!0}},exit:{type:"setUltraUpscaler",params:{ultra:!1}},on:{"generationMode.inputFast":{target:"fast"},"generationMode.inputQuality":{guard:(0,r.E)(["canUsePremium","canUseQualityGenerationMode"]),target:"quality"}}}}}}}),b=(0,r.A)(f);b.start()},54646:(e,t,n)=>{n.d(t,{G:()=>s});var a=n(65352),r=n(49011),i=n(68691);let s=()=>{let e=(0,a.d4)(r.$,e=>e.context.modelId),t=(0,i.G)(e=>e.generation.modelInfo.modelInfoMap);return{inputModelId:e=>{let n=t[e].sdVersion;r.$.send({type:"input.model",params:{modelId:e,modelVersion:n}})},modelId:e}}},72681:(e,t,n)=>{n.d(t,{Ce:()=>y,LO:()=>d,Nc:()=>g,QR:()=>v,bQ:()=>m,h0:()=>h,r7:()=>U,xU:()=>I,z$:()=>c});var a=n(79737),r=n(48831),i=n(17403),s=n(958),l=n(52592),o=n(35936);let u=e=>e===l.bd.StyleTransfer,p=(e,t,n)=>{if(!u(e))return null;let a=i.f,r=t.find(e=>u(e.controlnetType)),s=null==n?void 0:n.find(e=>e.akUUID===(null==r?void 0:r.akUUID));return{influence:a,...s&&{guidanceStrength:s.guidanceStrength,guidanceStrengthType:s.guidanceStrengthType}}};function d(e,t,n){return(null==e?void 0:e.length)?null==e?void 0:e.map(e=>e.akUUID===t.akUUID||e.id===t.id?{...e,guidanceStrength:n}:e):null}function m(e,t,n){return(null==e?void 0:e.length)?null==e?void 0:e.map(e=>e.akUUID===t.akUUID||e.id===t.id?{...e,guidanceStrengthType:n}:e):null}let g=(e,t,n)=>(null==e?void 0:e.length)?e.map(e=>e.id===t.id?{...e,influence:n}:e):null;function c(e,t,n,a){if(!t)return e;let r=e||[],i=null==a?void 0:a.find(e=>e.akUUID===t.akUUID);if(n)return r.map(e=>{var a,r;let l=e.akUUID===t.akUUID,o=l?e.guidanceStrength:null!==(a=null==i?void 0:i.weightDefault)&&void 0!==a?a:null,u=l?e.guidanceStrengthType:null!==(r=s.msQ.Mid)&&void 0!==r?r:null;if(e.id===n){let{id:e,akUUID:n,imageInput:a}=t;return{id:e,akUUID:n,controlnetType:null==i?void 0:i.controlnetType,imageInput:a,guidanceStrength:o,guidanceStrengthType:u,isDisabled:!1}}return e});if(t){var l;let{id:n,akUUID:o,imageInput:u,guidanceStrengthType:d}=t,m={id:n,akUUID:o,controlnetType:null==i?void 0:i.controlnetType,imageInput:u,guidanceStrength:null!==(l=null==i?void 0:i.weightDefault)&&void 0!==l?l:null,guidanceStrengthType:d||s.msQ.Mid,isDisabled:!1,...p(null==i?void 0:i.controlnetType,a,e)};return r.concat(m)}return e}function v(e,t){return t?{...t,imageInput:e}:{id:e.initImageId,akUUID:null,guidanceStrength:null,imageInput:e,isDisabled:!1}}function y(e,t){return(null==e?void 0:e.length)?null==e?void 0:e.filter(e=>e.id!==t.id):null}function I(e,t){var n;return(null==e?void 0:e.length)&&null!==(n=null==e?void 0:e.map(e=>e.id===t.id?{...e,isDisabled:!e.isDisabled}:e))&&void 0!==n?n:null}function h(e,t,n,a){return(null==t?void 0:t.length)?(null!=e?e:[]).map(i=>{var s,l,u;let p=null!==(s=t.find(e=>e.akUUID===i.akUUID))&&void 0!==s?s:null,d=(0,r.nD)(null==p?void 0:p.controlnetType,n),m=null!==(l=null==e?void 0:e.filter(e=>e.akUUID===i.akUUID))&&void 0!==l?l:[],g=Math.max(null==m?void 0:m.findIndex(e=>e.id===i.id),0)>=d,c=(0,o.Kw)(p,n,e,a);return{id:i.id,akUUID:i.akUUID,isDisabled:i.isDisabled,guidanceStrength:i.guidanceStrength,guidanceStrengthType:i.guidanceStrengthType,imageInput:i.imageInput,influence:i.influence,limit:d,guidanceType:g?{...p,isIncompatible:!0,disabledReason:(0,r.E9)(d)}:{...p,isIncompatible:!c.value,disabledReason:null!==(u=c.reason)&&void 0!==u?u:""}}}):[]}function U(){return{id:(0,a.A)(),akUUID:null,guidanceStrength:null,isDisabled:!1}}}}]);