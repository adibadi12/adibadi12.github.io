try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5bf2e191-81b3-4d9d-a118-6a10e2708055",e._sentryDebugIdIdentifier="sentry-dbid-5bf2e191-81b3-4d9d-a118-6a10e2708055")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2713],{8446:(e,t,l)=>{l.d(t,{S:()=>a});var r=l(95155);let a=e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...e,children:(0,r.jsx)("path",{d:"M8.99998 17.75C8.99898 17.75 8.99798 17.75 8.99698 17.75C8.79698 17.749 8.60598 17.669 8.46498 17.526L4.46498 13.464C4.17398 13.169 4.17798 12.694 4.47298 12.403C4.76798 12.113 5.24398 12.116 5.53398 12.411L9.00299 15.935L18.469 6.46902C18.762 6.17602 19.237 6.17602 19.53 6.46902C19.823 6.76202 19.823 7.23705 19.53 7.53005L9.52998 17.5301C9.38998 17.6711 9.19898 17.75 8.99998 17.75Z",fill:"currentColor"})})},22613:(e,t,l)=>{l.d(t,{T:()=>i,Y:()=>s});var r=l(95155),a=l(12115);let n=(0,a.createContext)({presets:[]}),s=()=>(0,a.useContext)(n),i=e=>{let{presets:t,children:l}=e,s=(0,a.useMemo)(()=>({presets:t}),[t]);return(0,r.jsx)(n.Provider,{value:s,children:l})}},26365:(e,t,l)=>{l.d(t,{P:()=>i});var r=l(95155),a=l(31481),n=l(12115),s=l(89867);let i=(0,n.forwardRef)((e,t)=>{let{onChange:l,onInput:n,maxLength:i,...o}=e;return(0,r.jsx)(s.A,{ref:t,size:"xl",placeholder:"Type a prompt ...",maxLength:null!=i?i:a.generationDefaults.prompt.max,variant:"filled",color:"#979797",resize:"none",fontSize:{md:"xl"},bgColor:"old.darkblue",borderColor:"old.greyblue",borderWidth:1,rounded:"lg",lineHeight:"170%",_hover:{bg:"darkbluealt"},py:2.5,px:4,onChange:e=>null==l?void 0:l(e.target.value),onInput:e=>null==n?void 0:n(e),...o})});i.displayName="PromptInput"},33992:(e,t,l)=>{l.d(t,{C5:()=>x,MJ:()=>h,Rr:()=>f,eI:()=>v,lR:()=>g,lV:()=>d,zB:()=>c});var r=l(95155),a=l(99708),n=l(12115),s=l(62177),i=l(93322),o=l(59434);let d=s.Op,u=n.createContext(null),c=e=>{let{...t}=e,l=n.useMemo(()=>({name:t.name}),[t.name]);return(0,r.jsx)(u.Provider,{value:l,children:(0,r.jsx)(s.xI,{...t})})},p=()=>{let e=n.useContext(u),t=n.useContext(m);if(!e)throw Error("useFormField should be used within <FormField>");let{getFieldState:l,formState:r}=(0,s.xW)(),a=l(e.name,r),{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...a}},m=n.createContext({}),v=n.forwardRef((e,t)=>{let{className:l,...a}=e,s=n.useId(),i=n.useMemo(()=>({id:s}),[s]);return(0,r.jsx)(m.Provider,{value:i,children:(0,r.jsx)("div",{ref:t,className:(0,o.cn)("grid gap-2.5",l),...a})})});v.displayName="FormItem";let g=n.forwardRef((e,t)=>{let{className:l,...a}=e,{formItemId:n}=p();return(0,r.jsx)(i.J,{ref:t,className:(0,o.cn)(l),htmlFor:n,...a})});g.displayName="FormLabel",n.forwardRef((e,t)=>{let{className:l,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col gap-0.5",l),...a})}).displayName="FormLabelGroup";let h=n.forwardRef((e,t)=>{let{...l}=e,{error:n,formItemId:s,formDescriptionId:i,formMessageId:o}=p();return(0,r.jsx)(a.DX,{ref:t,id:s,"aria-describedby":n?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!n,...l})});h.displayName="FormControl";let f=n.forwardRef((e,t)=>{let{className:l,...a}=e,{formDescriptionId:n}=p();return(0,r.jsx)("p",{ref:t,id:n,className:(0,o.cn)("text-secondary-foreground text-xs",l),...a})});f.displayName="FormDescription";let x=n.forwardRef((e,t)=>{let{className:l,children:a,...n}=e,{error:s,formMessageId:i}=p(),d=s?String(s.message):a;return d?(0,r.jsx)("p",{ref:t,id:i,className:(0,o.cn)("text-negative-foreground text-xs font-medium",l),...n,children:d}):null});x.displayName="FormMessage"},40602:(e,t,l)=>{l.d(t,{A:()=>s});var r=l(12115),a=l(66953),n=l(85756);let s=e=>{let{[n.s1.IMAGE]:t,[n.s1.VIDEO]:l,[n.s1.VARIATION]:s,[n.s1.TEXTURE]:i,[n.s1.PROMPT]:o,[n.s1.MODEL]:d}=(0,a.A)();return(0,r.useMemo)(()=>{switch(e){case n.s1.IMAGE:return t;case n.s1.VIDEO:return l;case n.s1.VARIATION:return s;case n.s1.TEXTURE:return i;case n.s1.PROMPT:return o;case n.s1.MODEL:return d}},[o,t,l,d,i,e,s])}},45574:(e,t,l)=>{l.d(t,{j:()=>i,p:()=>o});var r=l(95155),a=l(74466),n=l(12115),s=l(59434);let i=(0,a.F)("border-primary bg-input text-primary-foreground placeholder:text-tertiary-foreground focus-visible:border-selected hover:enabled:border-selected aria-invalid:border-negative flex w-full rounded-lg border transition-colors file:border-0 focus-visible:outline-hidden disabled:cursor-not-allowed disabled:opacity-50",{variants:{size:{sm:"h-8 px-3 py-1.5 text-sm",default:"h-10 px-4 py-2 text-base",lg:"h-12 px-3 py-2.5 text-lg"}},defaultVariants:{size:"default"}}),o=n.forwardRef((e,t)=>{let{className:l,size:a,type:n,...o}=e;return(0,r.jsx)("input",{className:(0,s.cn)(i({size:a,className:l})),ref:t,type:n,...o})});o.displayName="Input"},46200:(e,t,l)=>{l.d(t,{W:()=>s});var r=l(88095),a=l(12115),n=l(958);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{update:t,...l}=e,[s,i]=(0,r.n)(n.Eis,{...l,update(e,l,r){var a,n;let s=null===(n=l.data)||void 0===n?void 0:null===(a=n.delete_generated_images_by_pk)||void 0===a?void 0:a.id,i=e.identify({id:s,__typename:"generated_images"});e.evict({id:i}),e.gc(),null==t||t(e,l,r)}});return[(0,a.useCallback)((e,t)=>s({variables:{id:e},...t}),[s]),i]}},52672:(e,t,l)=>{l.d(t,{T:()=>i});var r=l(95155),a=l(12115),n=l(45574),s=l(59434);let i=a.forwardRef((e,t)=>{let{className:l,size:a,...i}=e;return(0,r.jsx)("textarea",{className:(0,s.cn)((0,n.j)({size:a,className:l}),"min-h-20"),ref:t,...i})});i.displayName="Textarea"},56697:(e,t,l)=>{l.d(t,{Zw:()=>f});var r=l(69507),a=l(31481),n=l(12115),s=l(22613),i=l(92167),o=l(35936),d=l(958),u=l(85756),c=l(66415),p=l(75264);let m=(e,t)=>Object.keys(u.We).find(l=>(e||t)===u.We[l]),v=e=>{let{promptMagic:t,promptMagicStrength:l,photoReal:r,photoRealStrength:a,initStrength:n,imageToImage:s}=e,i="No init image";return s&&n?n:t&&!s&&!l||t&&l||r&&!s&&!a||r&&a?i:n||i},g=(e,t,l)=>{if(l&&e){var r;return(null===(r=e.find(e=>e.akUUID===l))||void 0===r?void 0:r.name)||"-"}return t?u.d6[t]:"-"},h=(e,t,l)=>{if(l)return l;if(t&&e){var r;return(null===(r=e.find(e=>e.id===t))||void 0===r?void 0:r.name)||"-"}return"-"},f=(e,t,l)=>{let{data:u,loading:f,refetch:x,startPolling:b,stopPolling:y}=(0,r.I)(d.Z7e,{variables:{id:e},skip:!e,...t}),{styles:I}=(0,i.v)(),{presets:C}=(0,s.Y)(),j=(0,n.useMemo)(()=>{var e,t,r,n,s;let i=(0,c.OX)(null!==(s=null==u?void 0:u.generated_images_by_pk)&&void 0!==s?s:l);if(!i)return null;let{createdAt:f,generation:x,user:b,generated_image_moderation:y,generated_image_variation_generics:j,id:_,nsfw:A,conditionalImageUrl:w,imageUrl:O,motionGifUrl:S,motionMp4Url:N,showLatestUpscaledImg:R,imageWidth:E,imageHeight:M,teamId:T}=i,U=(0,p.a9)(j),k=(0,p.rY)(j),D=(0,p.H5)(j),P=(0,p.zK)(j),L=(0,p._A)(j),W=(0,p.cs)(j),z=(0,p.N2)(j),G=(0,p.KE)(j),V=(0,p.or)(j),{imageHeight:F,imageWidth:K,inferenceSteps:H,seed:B,modelId:Z,scheduler:X,custom_model:Y,initStrength:J,promptMagic:Q,promptMagicStrength:$,alchemy:q,contrastRatio:ee,presetStyle:et,styleUUID:el,photoReal:er,photoRealStrength:ea,photoRealVersion:en,transparency:es,ultra:ei}=x,eo=null==u?void 0:null===(r=u.generated_images_by_pk)||void 0===r?void 0:null===(t=r.generation)||void 0===t?void 0:null===(e=t.generation_presets_useds)||void 0===e?void 0:e[0],ed=X?(0,c.mN)(X):"No scheduler",eu=(0,o.p4)(null!=Z?Z:""),ec=[{spec:q?"Input Resolution":"Resolution",value:E&&M?"".concat(E,"x").concat(M):"".concat(K,"x").concat(F)},{spec:"Created",value:(0,c.Sz)(f)},eu?void 0:q?{spec:"Contrast",value:ee}:{spec:"Step Count",value:"Leonardo"===ed?"-":H},{spec:"Seed",value:B},{spec:"Preset",value:h(C,null==eo?void 0:eo.presetId)},{spec:"Preset Style",value:g(I,et,el)}].filter(Boolean);return er?(ec.push({spec:"PhotoReal",value:"On"}),en===a.PhotoRealVersion.V2?ec.push({spec:"Model",value:(0,o.Td)(Z,null==Y?void 0:Y.name)}):ec.push({spec:"Depth of Field",value:m(ea,J)})):Q&&ec.push({spec:"Prompt Magic Strength",value:$||J}),ec.push({spec:"Init Strength",value:v(x)}),es!==d.P2Y.Disabled&&ec.push({spec:"Transparent",value:"On"}),ec.push({spec:"Generation Mode",value:ei?"Ultra":q?"Quality":"Fast"}),{specs:ec,prompt:x.prompt,negativePrompt:x.negativePrompt,originalUrl:O,username:null==b?void 0:b.username,custom_model:Y,generated_image_moderation:y,generated_image_variation_generics:j,generation:x,id:_,userId:null==b?void 0:b.id,conditionalUrl:w,showLatestUpscaledImg:R,completedAlchemyRefinerUpscales:U,completedUnzooms:D,completedDefaultUpscales:P,completedAlternateUpscales:L,completedHdUpscales:W,completedNoBGS:z,completedSmoothUpscales:G,completedUniversalUpscales:k,completedUltraUpscales:V,nsfw:A,motionGifUrl:S,motionMp4Url:N,preset:eo,public:null==u?void 0:null===(n=u.generated_images_by_pk)||void 0===n?void 0:n.public,imageWidth:E,imageHeight:M,teamId:T}},[null==u?void 0:u.generated_images_by_pk,l,I,C]);return(0,n.useMemo)(()=>({image:j,loading:f,refetch:x,startPolling:b,stopPolling:y}),[j,f,x,b,y])}},56948:(e,t,l)=>{l.d(t,{t:()=>m});var r=l(95155),a=l(59108),n=l(58727),s=l(58670),i=l(57599),o=l(49004),d=l(35490),u=l(24759),c=l(31034),p=l(59789);let m=e=>{let{id:t,icon:l,isChecked:m,isDisabled:v,showPremiumBadge:g,isSwitchTooltipDisabled:h,label:f,labelProps:x,onChange:b,switchProps:y,switchTooltip:I,tooltip:C,lifecycleIndicatorLabel:j}=e;return(0,r.jsxs)(a.Flex,{alignItems:"center",flex:1,justifyContent:"space-between",children:[(0,r.jsxs)(n.HStack,{alignItems:"center",spacing:1,children:[l,(0,r.jsx)(s.Text,{as:"label",fontSize:"sm",fontWeight:"medium",htmlFor:t,...x,children:f}),j&&(0,r.jsx)(u.w,{lifeCycle:j,glow:!1,ml:"auto"}),C&&(0,r.jsx)(i.Tooltip,{arrowSize:6,fontSize:"xs",hasArrow:!0,label:C,placement:"auto",shouldWrapChildren:!0,children:(0,r.jsx)(o.Center,{children:(0,r.jsx)(c.A,{})})})]}),(0,r.jsx)(i.Tooltip,{isDisabled:h,hasArrow:!0,arrowSize:6,fontSize:"xs",label:I,shouldWrapChildren:!0,children:(0,r.jsxs)(n.HStack,{position:"relative",children:[g&&(0,r.jsx)(p.W,{position:"relative",width:6}),(0,r.jsx)(d.Switch,{"aria-labelledby":t,id:t,isChecked:m,isDisabled:v,onChange:()=>null==b?void 0:b(!m),size:"sm",...y})]})})]})}},66953:(e,t,l)=>{l.d(t,{A:()=>s});var r=l(12115),a=l(68691),n=l(85756);let s=()=>{let e=(0,a.G)(e=>e.user.paidTokens),t=(0,a.G)(e=>e.user.subscriptionTokens),l=(0,a.G)(e=>e.user.rolloverTokens),s=(0,a.G)(e=>e.user.subscriptionGptTokens),i=(0,a.G)(e=>e.user.subscriptionModelTokens);return(0,r.useMemo)(()=>{let r=e+t+l;return{[n.s1.IMAGE]:r,[n.s1.VIDEO]:r,[n.s1.VARIATION]:r,[n.s1.TEXTURE]:r,[n.s1.PROMPT]:s,[n.s1.MODEL]:i}},[s,i,e,t,l])}},81558:(e,t,l)=>{l.d(t,{K:()=>A});var r=l(95155),a=l(5520),n=l(23375),s=l(16299),i=l(27104),o=l(19782),d=l(88095),u=l(5643),c=l(49174),p=l(62105),m=l(12115),v=l(62177);let g={reason:""};var h=l(33992),f=l(52672),x=l(22252);let b=()=>{let{control:e}=(0,v.xW)();return(0,r.jsx)(h.zB,{control:e,name:"reason",render:e=>{var t;let{field:l}=e;return(0,r.jsxs)(h.eI,{children:[(0,r.jsxs)(h.lR,{children:["Reason"," ",(0,r.jsx)("span",{className:"text-negative-foreground","aria-hidden":"true",children:"*"})]}),(0,r.jsx)(h.MJ,{children:(0,r.jsx)(f.T,{...l,size:"sm",placeholder:"I don't like it.",maxLength:500,"aria-label":"Reason"})}),(0,r.jsx)(h.Rr,{children:(0,x.y)((null===(t=l.value)||void 0===t?void 0:t.length)||0,500)})]})}})};var y=l(74702);let I=e=>{let{onClose:t}=e,{formState:l}=(0,v.xW)();return(0,r.jsxs)("div",{className:"flex w-full gap-2",children:[(0,r.jsx)(y.$,{className:"w-full",variant:"secondary",onClick:t,disabled:l.isSubmitting,children:"Cancel"}),(0,r.jsx)(y.$,{className:"w-full",type:"submit",disabled:!l.isDirty||!l.isValid||l.isSubmitting,loading:l.isSubmitting,children:"Report"})]})};var C=l(958),j=l(91073);let _=e=>{let{onClose:t,generationId:l,modelId:a,userId:n}=e,s=(0,v.mN)({defaultValues:g,mode:"onBlur"}),i=(0,j.A)(),[o]=(0,d.n)(C.ihR),f=(0,m.useCallback)(async e=>{let{reason:r}=e,s={reportReason:r,reportedGenerationId:l,reportedCustomModelId:a,reportedUserId:n};try{await o({variables:{objects:s}}),t()}catch(e){i({title:"Error",description:"There was an error submitting your report. Please try again later.",type:j.k.error,position:"bottom"}),p.wd("Image reporting has failed",{user:{id:n},extra:{...s,errorResponse:e}})}},[l,a,n,t,o,i]);return(0,r.jsx)(h.lV,{...s,children:(0,r.jsxs)("form",{onSubmit:s.handleSubmit(f),children:[(0,r.jsx)(u.ModalBody,{children:(0,r.jsx)(b,{})}),(0,r.jsx)(c.ModalFooter,{justifyContent:"space-between",children:(0,r.jsx)(I,{onClose:t})})]})})},A=e=>{let{isOpen:t,onClose:l,...d}=e;return(0,r.jsxs)(a.Modal,{isOpen:t,onClose:l,children:[(0,r.jsx)(n.ModalOverlay,{}),(0,r.jsxs)(s.ModalContent,{children:[(0,r.jsx)(i.ModalHeader,{children:(0,r.jsx)("h2",{className:"text-lg",children:"What is the reason for this report?"})}),(0,r.jsx)(o.ModalCloseButton,{}),(0,r.jsx)(_,{onClose:l,...d})]})]})}},92167:(e,t,l)=>{l.d(t,{u:()=>i,v:()=>s});var r=l(95155),a=l(12115);let n=(0,a.createContext)({styles:[]}),s=()=>(0,a.useContext)(n),i=e=>{let{styles:t,children:l}=e,s=(0,a.useMemo)(()=>({styles:t}),[t]);return(0,r.jsx)(n.Provider,{value:s,children:l})}},93322:(e,t,l)=>{l.d(t,{J:()=>d});var r=l(95155),a=l(40968),n=l(74466),s=l(12115),i=l(59434);let o=(0,n.F)("text-sm font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:l,...n}=e;return(0,r.jsx)(a.b,{ref:t,className:(0,i.cn)(o(),l),...n})});d.displayName=a.b.displayName},96576:(e,t,l)=>{l.d(t,{z:()=>I,g:()=>y});var r=l(95155),a=l(52017),n=l(55028),s=l(12115),i=l(65751),o=l(81558),d=l(75264);let u=e=>{var t,l;if(!e)return{selectOptions:[]};let r=(0,d.fU)(e.completedNoBGS||[]),a=(0,d.Am)(e.completedAlchemyRefinerUpscales||[]),n=(0,d.Tn)(e.completedUniversalUpscales||[]),s=(0,d.yG)(e.completedUltraUpscales||[]),i=(0,d.nI)(e.completedDefaultUpscales||[]),o=(0,d.EQ)(e.completedAlternateUpscales||[]),u=(0,d.yh)(e.completedHdUpscales||[],!!(null===(t=e.generation)||void 0===t?void 0:t.alchemy)),c=(0,d._i)(e.completedUnzooms||[]),p=(0,d.ob)(e.completedSmoothUpscales||[],!!(null===(l=e.generation)||void 0===l?void 0:l.alchemy)),m=!!(null==a?void 0:a.length),v=!!n.length,g=!!s.length,h=!!(null==i?void 0:i.length),f=!!(null==o?void 0:o.length),x=!!(null==u?void 0:u.length),b=!!(null==c?void 0:c.length),y=!!(null==r?void 0:r.length),I=!!(null==p?void 0:p.length),C=(0,d.KV)({originalImg:e,hasDefaultUpscaledOptions:h,defaultUpscaledOptions:i,hasAlternateUpscaledOptions:f,alternateUpscaledOptions:o,hasHdUpscaledOptions:x,hdUpscaledOptions:u,hasUnzoomedOptions:b,unzoomedOptions:c,hasNoBgOptions:y,noBgOptions:r,hasSmoothUpscaledOptions:I,smoothUpscaledOptions:p,alchemyRefinerOptions:a,hasAlchemyRefinerOptions:m,universalUpscalerOptions:n,hasUniversalUpscalerOptions:v,ultraUpscalerOptions:s,hasUltraUpscalerOptions:g}),j=(0,d.Ws)(e.generated_image_variation_generics);return{defaultSelect:C.find(e=>e.variationId===(null==j?void 0:j.id)),selectOptions:C,detailedSelectOptions:(0,d.TA)(e)}};var c=l(85756);let p=(e,t)=>{if(!e||!t)return{id:"",transformType:null,upscale_details:[],url:null};let{id:l,originalUrl:r}=e,a="string"==typeof t?t:t.value;return a===c.AK.ORIGINAL?{id:l,transformType:null,upscale_details:[],url:r}:a.startsWith(c.AK.ALCHEMY_REFINER)?e.completedAlchemyRefinerUpscales[parseInt(a.split("-")[1])]:a.startsWith(c.AK.UNIVERSAL_UPSCALE)?e.completedUniversalUpscales[parseInt(a.split("-")[1])]:a.startsWith(c.AK.NO_BG)?e.completedNoBGS[parseInt(a.split("-")[1])]:a.startsWith(c.AK.DEFAULT_UPSCALED)?e.completedDefaultUpscales[parseInt(a.split("-")[1])]:a.startsWith(c.AK.ALTERNATE_UPSCALED)?e.completedAlternateUpscales[parseInt(a.split("-")[1])]:a.startsWith(c.AK.HD_UPSCALED)?e.completedHdUpscales[parseInt(a.split("-")[1])]:a.startsWith(c.AK.SMOOTH_UPSCALED)?e.completedSmoothUpscales[parseInt(a.split("-")[1])]:a.startsWith(c.AK.UNZOOMED)?e.completedUnzooms[parseInt(a.split("-")[1])]:a.startsWith(c.AK.ULTRA_UPSCALE)?e.completedUltraUpscales[parseInt(a.split("-")[1])]:void 0};var m=l(56697),v=l(46200),g=l(88095),h=l(958);let f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{update:t,...l}=e,[r,a]=(0,g.n)(h.z1G,{...l,update(e,l,r){var a,n;let s=null===(n=l.data)||void 0===n?void 0:null===(a=n.delete_generated_image_variation_generic_by_pk)||void 0===a?void 0:a.id,i=e.identify({id:s,__typename:"generated_image_variation_generic"});e.evict({id:i}),e.gc(),null==t||t(e,l,r)}});return[(0,s.useCallback)((e,t)=>r({variables:{id:e},...t}),[r]),a]},x=(0,n.default)(()=>Promise.all([l.e(5263),l.e(6112),l.e(2625),l.e(3779)]).then(l.bind(l,52625)).then(e=>e.AlchemyRefinerModal),{loadableGenerated:{webpack:()=>[52625]}}),b=(0,s.createContext)({image:null,loading:!1,loadingSelectedVariation:!1,deleting:!1,selectedImageVariation:void 0,selectOptions:[],detailedSelectOptions:{},selectedVariation:void 0,selectedVariationId:void 0,zoomedOpen:!1,setZoomedOpen:()=>null,setLoadingSelectedVariation:()=>null,setSelectedVariationId:()=>null,openConfirmationModal:()=>null,onClose:()=>null,onDelete:()=>null,contextExists:!1}),y=()=>(0,s.useContext)(b),I=e=>{let{imageId:t,selectedVariationValue:l,loadingVariationOnStart:n,onClose:d,onDelete:g,children:h,fallbackImage:y}=e,[I,C]=(0,s.useState)(l),[j,_]=(0,s.useState)(!!n),[A,w]=(0,s.useState)(!1),{image:O,loading:S}=(0,m.Zw)(e.imageOverride?"":t,void 0,e.imageOverride?void 0:y),N=e.imageOverride||O,{defaultSelect:R,selectOptions:E,detailedSelectOptions:M}=u(N),T=E.find(e=>!!I&&(I===(null==N?void 0:N.id)?void 0===e.variationId:e.value===I||e.variationId===I))||R,U=p(N,T),{isOpen:k,onOpen:D,onClose:P}=(0,a.useDisclosure)(),{isOpen:L,onOpen:W,onClose:z}=(0,a.useDisclosure)(),{isOpen:G,onOpen:V,onClose:F}=(0,a.useDisclosure)(),K=null==N?void 0:N.generation.id,H=(null==T?void 0:T.value)||c.AK.ORIGINAL,[B,{loading:Z}]=(0,v.W)({onCompleted:()=>{z(),null==g||g()}}),[X,{loading:Y}]=f({onCompleted:()=>{z(),null==g||g()}}),J=(0,s.useCallback)(()=>B(t),[B,t]),Q=(0,s.useCallback)(e=>{if(null==e?void 0:e.id)return H===c.AK.ORIGINAL?J():X(e.id)},[H,X,J]),$=!!Z||!!Y,q=(0,s.useCallback)(e=>{switch(e){case"delete":W();break;case"report":D();break;case"alchemy-refiner":V()}},[V,W,D]),[ee,et]=(0,s.useState)([]),[el,er]=(0,s.useState)();(0,s.useEffect)(()=>{if(el===t&&ee.length&&ee.length<E.length){let e=E.find(e=>!ee.some(t=>t.variationId===e.variationId));e&&(C(e.variationId),_(!0))}ee.length!==E.length&&et(E),el!==t&&er(t)},[ee,E,el,t]);let ea=(0,s.useMemo)(()=>({image:N,loading:S,loadingSelectedVariation:j,deleting:$,selectedImageVariation:U,selectOptions:E,detailedSelectOptions:M,selectedVariation:T,selectedVariationId:I,zoomedOpen:A,setZoomedOpen:w,setSelectedVariationId:C,setLoadingSelectedVariation:_,openConfirmationModal:q,onClose:d,onDelete:g,contextExists:!0}),[N,S,j,$,U,E,M,T,I,A,q,d,g]);return(0,r.jsxs)(b.Provider,{value:ea,children:[h,(0,r.jsx)(o.K,{isOpen:k,onClose:P,generationId:K}),(0,r.jsx)(i.A,{isOpen:L,onClose:z,deleteImage:()=>Q(U),loading:$,variation:null==U?void 0:U.transformType}),N&&(0,r.jsx)(x,{variant:"generation",imageId:t,generation:N.generation,variations:N.generated_image_variation_generics,isOpen:G,onClose:F})]})}}}]);