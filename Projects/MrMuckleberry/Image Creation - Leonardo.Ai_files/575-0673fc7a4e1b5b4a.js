try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8352bf7b-13d6-4863-b57c-d3b3bee7b64c",e._sentryDebugIdIdentifier="sentry-dbid-8352bf7b-13d6-4863-b57c-d3b3bee7b64c")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{68096:(e,t,n)=>{n.d(t,{q:()=>y});var i=n(95155),l=n(12115),o=n(43386),r=n(84612),a=n(81434),s=n(31117),d=n(60245),c=n.n(d),u=n(35095),m=n.n(u),g=n(70954),h=n.n(g),x=n(41998),p=n.n(x);let b=(e,t)=>{let n=h()(t,"__typename"),i=p()(h()(e,"__typename"),m()(t));return c()(n,i)};var f=n(91496),v=n(958),j=n(66415);let w=(e,t)=>{let n=(0,s.m)(),i=(0,l.useCallback)(i=>{if(!i.complete)return;let l=!1,o=e.reduce((e,t)=>t.id!==i.data.id?n.readFragment({id:(0,j.Fd)(t.id),fragment:v.Rrr})?[...e,t]:(l=!0,e):b(t,i.data)?[...e,t]:(l=!0,[...e,{...t,...i.data}]),[]);(l||o.length!==e.length)&&t(o)},[t,e,n]),o=(0,f.d)(i,r.J,[t,e,n]);return(0,l.useEffect)(()=>{let t=e.map(e=>n.cache.watchFragment({from:(0,j.Fd)(e.id),fragment:v.SK6,optimistic:!1}).subscribe(o));return()=>{t.forEach(e=>e.unsubscribe())}},[e,n,o]),[e,t]};var C=n(69122);let y=e=>{let{children:t}=e,{userSelectedTeam:n}=(0,C.s)(),s=n(),d=null==s?void 0:s.id,c=(0,o.V)({selectedItems:r.u.selectedImages,isSelectingItems:r.u.isSelectingImages}),[u,m]=w(c.selectedItems,c.setSelectedItems),g=u.map(e=>e.id),h=(0,l.useMemo)(()=>({isSelectingImages:c.isSelectingItems,selectedImages:u,selectedImageIds:g,clearSelectedImages:c.clearSelectedItems,setIsSelectingImages:c.setIsSelectingItems,toggleImageSelection:c.toggleItemSelection,isDragSelectingImages:c.isDragSelectingItems,toggleImageDragSelect:c.toggleItemDragSelect,setSelectedImages:m}),[c,u,m,g]);return(0,i.jsx)(a.c.Provider,{value:h,children:t},d)}},77252:(e,t,n)=>{n.d(t,{oK:()=>h});var i=n(88095),l=n(31117),o=n(62105),r=n(35695),a=n(69122),s=n(91073),d=n(81434),c=n(19321),u=n(958);let m=(e,t)=>{t.forEach(t=>{let n="generated_images:".concat(t);e.cache.evict({id:n})||console.warn("Error removing image with id '".concat(n,"' from apollo cache"))})},g=(e,t,n)=>{t.forEach(t=>{let i=e.identify({id:t,__typename:"generated_images"});if(!i){console.error("Could not generate cache ID for generated_images.id ".concat(t));return}e.modify({id:i,fields:{public:()=>n}})})},h=()=>{let[e,{loading:t}]=(0,i.n)(u.dfv),n=(0,s.A)(),{userSelectedTeam:h}=(0,a.s)(),{setSelectedImages:x,selectedImages:p}=(0,d.V)(),b=h(),f=(0,l.m)(),v=!!b.id,j=(0,r.usePathname)(),w=null==j?void 0:j.startsWith(c.a.TEAM_FEED);return{updateImagePrivacy:async function(t,i){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var r,a;let{data:o}=await e({variables:{generatedImageIds:t,public:i},update(e,n){let{data:l}=n;if(!(null==l?void 0:l.updateGeneratedImagesPublic)){console.error("Could not update cache for generated_images after updateGeneratedImagesPublic due to data.updateGeneratedImagesPublic being undefined");return}g(e,t,i)}});if(!(null==o?void 0:null===(r=o.updateGeneratedImagesPublic)||void 0===r?void 0:r.affectedRows))return!1;let d=null==o?void 0:null===(a=o.updateGeneratedImagesPublic)||void 0===a?void 0:a.affectedRows,c=1===d?"The selected image has been made ".concat(i?"public":"private"," in the team feed."):"".concat(d," selected images have been made ").concat(i?"public":"private"," in the feed."),u=1===d?"The selected image has been made ".concat(i?"public":"private"," in the feed."):"".concat(d," selected images have been made ").concat(i?"public":"private"," in the feed.");v&&!i&&(l&&m(f,t),w&&x(p.filter(e=>!t.includes(e.id)))),n({description:v?c:u,position:"bottom-right",type:s.k.info})}catch(e){return console.error("failed to update image privacy",e),o.Cp(e),n({title:"Error",description:"There was an error updating the privacy of the selected images.",type:s.k.error,position:"bottom-right"}),!1}return!0},loading:t}}},82756:(e,t,n)=>{n.d(t,{d:()=>l});var i=n(20927);let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.map(e=>({id:e.id,url:e.imageUrl,generated_image_variation_generics:e.generated_image_variation_generics.map(e=>({__typename:"generated_image_variation_generic",...e})),generation:{...e.generation,motion:!!e.motionMp4Url,user:{__typename:"users",id:e.user.id,username:e.user.username}},nsfw:e.nsfw,generated_image_moderation:e.generated_image_moderation}));return(0,i.g)(n,t)}},91075:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(95155),l=n(3740);let o=e=>(0,i.jsxs)(l.Icon,{width:3.5,height:3.5,viewBox:"0 0 14 14",stroke:"currentColor",fill:"currentColor",...e,children:[(0,i.jsx)("path",{d:"M0.5 13.5L13.5 0.5"}),(0,i.jsx)("path",{d:"M0.5 7.5L7.5 0.5"}),(0,i.jsx)("path",{d:"M0.5 1.5L1.5 0.5"}),(0,i.jsx)("path",{d:"M6.5 13.5L13.5 6.5"}),(0,i.jsx)("path",{d:"M12.5 13.5L13.5 12.5"})]})},91496:(e,t,n)=>{n.d(t,{d:()=>r});var i=n(91959),l=n.n(i),o=n(12115);function r(e,t,n){let i=(0,o.useRef)(e);return(0,o.useEffect)(()=>{i.current=e},[e]),(0,o.useCallback)(l()(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.current(...t)},t),n)}},92905:(e,t,n)=>{n.d(t,{w:()=>e0});var i=n(95155),l=n(5138),o=n(52017),r=n(12974),a=n(22648),s=n(59108),d=n(85821),c=n(62105),u=n(55028),m=n(35695),g=n(12115),h=n(19997),x=n(45206);let p=(e,t,n)=>1===e?t:n,b=e=>0===e?"No images":"".concat(e," ").concat(p(e,"image","images")),f=e=>e>0?"".concat(e," ").concat(p(e,"variation","variations")):"",v=e=>e>0?"".concat(e," ").concat(p(e,"collection","collections")):"",j=e=>{let{imageCount:t,variationsCount:n,collectionsCount:i}=e,l=[];if(i>0&&l.push(v(i)),t>0&&l.push(b(t)),n>0&&l.push(f(n)),0===l.length)return"No images selected";if(1===l.length)return"".concat(l[0]," selected");if(2===l.length)return"".concat(l[0]," and ").concat(l[1]," selected");let o=l.pop();return"".concat(l.join(",")," and ").concat(o," selected")};var w=n(57599),C=n(1996),y=n(831),I=n(58670),k=n(77700),S=n(59771),A=n(59118),_=n(59133),O=n(90339),D=n(14331),B=n(43594),E=n(88833),T=n(84259);let M=e=>{let{isLoading:t,onDownloadOriginalImages:n,onDownloadAllImages:l,imageCount:o,handleOpenBuyModal:r,collectionCount:a,...c}=e,{hasPermission:u}=(0,D.S)(),m=!u("bulkDownload","create");return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(w.Tooltip,{isDisabled:!m,hasArrow:!0,closeOnClick:!1,shouldWrapChildren:!0,label:"Unlock bulk actions and more with Leonardo Premium!",children:(0,i.jsxs)(C.Menu,{...m?{isOpen:!1}:{},children:[(0,i.jsxs)(s.Flex,{position:"relative",width:"100%",children:[(0,i.jsxs)(y.MenuButton,{isDisabled:0===o&&0===a,...m?{onClick:r}:{},as:d.Button,isLoading:t,width:"fit-content",size:"sm",variant:"outline",fontSize:"sm",fontWeight:500,bg:"background.darkblue",borderColor:"border.greyBlue",py:2,pl:4,pr:m?6:4,borderRadius:"lg",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",...c,children:[(0,i.jsx)(B.A,{boxSize:4,mr:2}),(0,i.jsx)(I.Text,{as:"span",children:"Download"}),(0,i.jsx)(_.A,{boxSize:2,ml:2})]}),m&&(0,i.jsx)(k.Box,{position:"absolute",top:0,right:0,width:"fit-content",maxH:"max-content",bg:"gradient.main",borderRadius:"0 0.5rem",cursor:"pointer",children:(0,i.jsx)(O.A,{display:"flex",width:"1rem",height:"1rem",m:"0.05rem"})})]}),(0,i.jsxs)(S.MenuList,{minWidth:48,bg:"border.nobleBlack",p:0,border:"none",children:[(0,i.jsxs)(A.MenuItem,{as:d.Button,borderBottomRadius:0,bg:"border.nobleBlack",display:"flex",alignItems:"center",justifyContent:"flex-start",onClick:m?r:n,children:[(0,i.jsx)(k.Box,{mr:1.5,children:(0,i.jsx)(E.A,{fill:"white",width:"1.25rem",height:"1.25rem"})}),"Original images"]}),(0,i.jsxs)(A.MenuItem,{as:d.Button,borderTopRadius:0,bg:"border.nobleBlack",display:"flex",alignItems:"center",justifyContent:"flex-start",onClick:m?r:l,children:[(0,i.jsx)(k.Box,{mr:1.5,children:(0,i.jsx)(T.A,{fill:"white",width:"1.125rem",height:"1.125rem"})}),"All images"]})]})]})})})};var R=n(81228),F=n(84025);let z=e=>{let{imagesCount:t,collectionsCount:n,isCollectionPage:l,onPaymentOptionsOpen:o,onRemoveCollectionImagesOpen:r,onRemoveCollectionsContentOpen:a,canTeamMemberDelete:c,onDeleteImagesOpen:u,...m}=e,{hasPermission:g}=(0,D.S)(),h=g("generation","delete"),{isBulkDeleteOfCollectionsEnabled:x}=(0,R.D0)();return(0,i.jsx)(w.Tooltip,{isDisabled:!(null===c?!h:!h||!c),hasArrow:!0,closeOnClick:!1,label:!1===c?"You don't have permission to delete team members images.":"Unlock removing images and more with Leonardo Premium!",shouldWrapChildren:!0,children:(0,i.jsxs)(s.Flex,{position:"relative",children:[(0,i.jsx)(d.Button,{isDisabled:t+n===0||!1===c||n>0&&!x,"aria-label":"Remove",bg:"background.darkblue",borderColor:"border.greyBlue",fontWeight:500,borderRadius:"lg",leftIcon:(0,i.jsx)(F.A,{}),onClick:()=>{if(n>0){a();return}if(t>0&&l){r();return}if(!h){o();return}u()},variant:"outline",h:8,flex:1,paddingLeft:4,paddingRight:h?4:6,...m,children:"Remove"}),!h&&(0,i.jsx)(k.Box,{position:"absolute",top:0,right:0,width:"fit-content",maxH:"max-content",bg:"gradient.main",borderRadius:"0 0.5rem",cursor:"pointer",children:(0,i.jsx)(O.A,{display:"flex",width:"1rem",height:"1rem",m:"0.05rem"})})]})})};var L=n(46671),N=n(40619),P=n(81434),W=n(56496),H=n(34849),V=n(19321),G=n(83833),U=n(69122),Q=n(77252),Y=n(80891),$=n(64478),q=n(49993);let J=e=>{let{isTeamSelected:t,isFirstImagePublic:n}=e;return t?n?"Hide in Team Feed":"Show in Team Feed":n?"Make Private":"Make Public"},K=e=>{let{isFirstImagePublic:t,hasReadOnlySelectedImages:n,shouldShowPremiumIcon:i}=e;return n?t?"You don't have permission to hide team members images.":"You don't have permission to show team members images.":i?"Unlock private generations and more with Leonardo Premium!":void 0},Z=e=>{let{openBuyModal:t}=e,{loading:n,updateImagePrivacy:l}=(0,Q.oK)(),{userSelectedTeam:o}=(0,U.s)(),{selectedImages:r}=(0,P.V)(),{isUserFreePlan:a}=(0,Y.usePlan)(),{openCollectionPrivacyWarning:c}=(0,N.o)(),{isFreePlanElevated:u}=(0,G.D)(),g=(0,$.w)(),h=(0,m.usePathname)(),x=null==h?void 0:h.startsWith(V.a.TEAM_FEED),p=o(),b=!!p.id,f=!!(r.length>0&&r[0].isPublic),v=p.userRole!==L.TEAM_ROLE_TYPE.OWNER&&r.some(e=>e.teamId&&e.userId!==g),j=!b&&a&&!u,C=(b||!a)&&!v,y=0===r.length||v,I=J({isTeamSelected:b,isFirstImagePublic:f}),S=K({isFirstImagePublic:f,shouldShowPremiumIcon:j,hasReadOnlySelectedImages:v}),A=async()=>{if(!C){t();return}if(0===r.length)return;let e=!r[0].isPublic;await l(r.map(e=>e.id),e,x)&&r.find(e=>{var t;return!!(null===(t=e.collection_images)||void 0===t?void 0:t.length)})&&b&&!e&&c()},_=f?(0,i.jsx)(W.A,{color:"white",height:4,width:4}):(0,i.jsx)(H.A,{color:"white",width:4,height:4});return(0,i.jsx)(w.Tooltip,{isDisabled:!S,hasArrow:!0,closeOnClick:!1,textAlign:"center",bgColor:"button.input",label:S,placement:"top",shouldWrapChildren:!0,children:(0,i.jsxs)(s.Flex,{position:"relative",children:[(0,i.jsx)(d.Button,{"aria-label":I,leftIcon:_,isLoading:n,isDisabled:y,size:{base:"sm"},variant:"outline",onClick:A,fontSize:"sm",borderColor:"border.greyBlue",bg:v?q.C3.GRAY_DISABLED_BUTTON_BG:"background.darkblue",fontWeight:500,color:"white",py:2,paddingInline:{base:"1.5 !important",lg:"4 !important"},borderRadius:"lg",width:"100%",children:I}),j&&(0,i.jsx)(k.Box,{position:"absolute",top:0,right:0,width:"fit-content",maxH:"max-content",bg:"gradient.main",borderBottomLeftRadius:"0.25rem",borderTopRightRadius:"0.25rem",cursor:"pointer",children:(0,i.jsx)(O.A,{display:"flex",width:"1rem",height:"1rem",m:"0.05rem"})})]})})};var X=n(68031),ee=n(97386);let et=()=>{let{setIsSelectingImages:e,clearSelectedImages:t}=(0,P.V)(),{clearSelectedCollections:n}=(0,X._Q)();return(0,i.jsx)(d.Button,{"aria-label":"Exit mode",leftIcon:(0,i.jsx)(ee.A,{color:"white"}),size:"sm",variant:"outline",onClick:()=>{e(!1),t(),n()},fontSize:"sm",borderColor:"border.greyBlue",bg:"background.darkblue",fontWeight:500,color:"white",py:2,paddingInline:{base:"1.5 !important",xl:"3 !important"},borderRadius:"lg",children:"Exit mode"})};var en=n(5520),ei=n(23375),el=n(16299),eo=n(5643),er=n(49004),ea=n(75569),es=n(11649),ed=n(58727),ec=n(84492),eu=n(19611),em=n(27593);let eg=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I.Text,{mb:"calc(".concat(em.fb," * 2.75) !important"),color:"#DBDBDB",opacity:.5,children:"If it is the only image within the generation, the generation will also be deleted."}),(0,i.jsx)(I.Text,{mb:"calc(".concat(em.fb," * 2.75) !important"),color:"#FF8600",children:"If you are deleting the original image, all upscales and transparent images will be deleted as well."})]}),eh=e=>{let{isOpen:t,onClose:n,deleteImage:l,loading:o,variation:r,title:a}=e;return(0,i.jsxs)(en.Modal,{isOpen:t,onClose:n,closeOnOverlayClick:!0,isCentered:!0,children:[(0,i.jsx)(ei.ModalOverlay,{}),(0,i.jsx)(el.ModalContent,{px:2,py:5,textAlign:"center",children:(0,i.jsx)(eo.ModalBody,{children:(0,i.jsx)(er.Center,{children:(0,i.jsxs)(ea.VStack,{maxW:"calc(".concat(em.fb," * 39.125)"),children:[(0,i.jsx)(er.Center,{mb:"calc(".concat(em.fb," * 0.9375)"),children:(0,i.jsx)(eu.A,{})}),(0,i.jsx)(es.Heading,{size:"lg",fontWeight:600,mb:"calc(".concat(em.fb," * 1.125)"),children:a}),(0,i.jsx)(I.Text,{mb:"calc(".concat(em.fb," * 0.5) !important"),color:"#DBDBDB",opacity:.5,children:"If you confirm, these will be impossible to recover."}),r?(0,i.jsx)(eg,{}):null,(0,i.jsxs)(ed.HStack,{spacing:{base:"calc(".concat(em.fb," * 1)"),xs:"calc(".concat(em.fb," * 2.25)")},justify:"center",width:"100%",children:[(0,i.jsx)(d.Button,{py:4,width:"50%",variant:"outline",onClick:n,isDisabled:o,children:"Cancel"}),(0,i.jsx)(d.Button,{isDisabled:o,onClick:async()=>{l()},py:4,width:"50%",variant:"solid",backgroundColor:q.lm.ORANGE,leftIcon:o?(0,i.jsx)(ec.Spinner,{w:4,h:4}):void 0,children:"Delete"})]})]})})})})]})};var ex=n(2044),ep=n(39376),eb=n(60078),ef=n(42982),ev=n(31034),ej=n(17973),ew=n(77062),eC=n(48392);let ey=(0,u.default)(()=>n.e(3216).then(n.bind(n,13216)).then(e=>e.TokensRunningLowUpgradeModal),{loadableGenerated:{webpack:()=>[13216]}}),eI=e=>{let{isOpen:t,onClose:n,deleteImage:l,removeImage:o,loading:r}=e,{open:a}=(0,ew.A)(eC.A.UPGRADE),{isUserFreePlan:s}=(0,Y.usePlan)(),[c,u]=(0,g.useState)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(en.Modal,{isOpen:t,onClose:n,closeOnOverlayClick:!0,isCentered:!0,children:[(0,i.jsx)(ei.ModalOverlay,{}),(0,i.jsx)(el.ModalContent,{px:8,py:10,textAlign:"center",children:(0,i.jsx)(eo.ModalBody,{children:(0,i.jsx)(er.Center,{children:(0,i.jsxs)(ea.VStack,{maxW:{base:88,md:"md"},children:[(0,i.jsx)(er.Center,{mb:4,children:c?(0,i.jsx)(eu.A,{}):(0,i.jsx)(ej.A,{})}),(0,i.jsx)(es.Heading,{size:"lg",fontWeight:600,children:c?"Are you sure you want to delete this image?":"Are you sure you want to remove this image?"}),(0,i.jsxs)(ea.VStack,{mb:6,children:[(0,i.jsx)(I.Text,{fontWeight:"normal",children:"Removing images from a collection doesn't affect the source image. To delete an image permanently from all locations, check the box below."}),(0,i.jsx)(w.Tooltip,{isDisabled:!s,hasArrow:!0,placement:"bottom",label:"Bulk delete is available to premium users only",children:(0,i.jsxs)(ed.HStack,{pt:6,onClick:()=>{s&&a()},children:[(0,i.jsx)(ex.Checkbox,{variant:"alternative",disabled:s,isChecked:c,onChange:e=>u(e.target.checked),children:"Delete source images"}),s&&(0,i.jsxs)(ed.HStack,{children:[(0,i.jsx)(ep.IconButton,{"aria-label":"Upgrade",size:"xs",bg:"linear-gradient(81deg, #D951A5 13.83%, #B14BF4 49.5%, #6E7BFC 85.32%)",_hover:{bg:"linear-gradient(81deg, #D951A5 13.83%, #B14BF4 49.5%, #6E7BFC 85.32%)"},color:"white",rounded:"md",icon:(0,i.jsx)(O.A,{width:4,height:4})}),(0,i.jsx)(k.Box,{children:(0,i.jsx)(ev.A,{})})]})]})})]}),(0,i.jsxs)(eb.Stack,{direction:{base:"column",md:"row"},spacing:{base:4,xs:9},justify:"center",width:"100%",children:[(0,i.jsx)(d.Button,{py:4,width:{base:"100%",md:"50%"},variant:"outline",onClick:n,isDisabled:r,children:"Cancel"}),c?(0,i.jsx)(d.Button,{isLoading:r,isDisabled:r,onClick:l,py:4,width:{base:"100%",md:"50%"},variant:"solid",backgroundColor:q.lm.ORANGE,leftIcon:r?(0,i.jsx)(ec.Spinner,{w:4,h:4}):void 0,children:"Delete Image Everywhere"}):(0,i.jsx)(d.Button,{isLoading:r,isDisabled:r,onClick:o,py:4,width:{base:"100%",md:"50%"},variant:"glow",children:"Remove from Collection"})]})]})})})})]}),(0,i.jsx)(ef.default,{}),(0,i.jsx)(g.Suspense,{children:(0,i.jsx)(ey,{})})]})};var ek=n(5136),eS=n(24077),eA=n(3740),e_=n(15876),eO=n(8376),eD=n(77078),eB=n(958);let eE=e=>{let{collection:t}=e,[n,l]=(0,g.useState)(null),{data:o}=(0,eS.I)({fragment:eB.l3f,from:{__typename:"collection",id:t.id}});if(o&&!n){var r,a;l(null!==(a=null==o?void 0:null===(r=o.collection_images)||void 0===r?void 0:r.map(e=>{var t,n;return null!==(n=null==e?void 0:null===(t=e.generated_image)||void 0===t?void 0:t.url)&&void 0!==n?n:""}).filter(e=>!!e))&&void 0!==a?a:[])}return(0,i.jsxs)(s.Flex,{direction:"column",alignItems:"flex-start",borderRadius:"lg",overflow:"hidden",bg:"gradient.background",border:"1px solid",borderColor:"border.greyBlue",w:"6.25rem",h:"6.25rem",flexShrink:0,children:[(0,i.jsx)(k.Box,{h:"90%",w:"full",overflow:"hidden",position:"relative",p:0,children:n&&n.length>0?(0,i.jsx)(eO.K,{images:null!=n?n:[],name:t.collectionName,count:4}):(0,i.jsx)(k.Box,{position:"relative",w:"full",h:"full",display:"flex",alignItems:"center",justifyContent:"center",children:(0,i.jsx)(eD.A,{opacity:.6,boxSize:"3.5rem"})})}),(0,i.jsxs)(ed.HStack,{justify:"space-between",align:"center",p:1,w:"full",children:[(0,i.jsx)(I.Text,{fontSize:"2xs",fontWeight:"medium",color:"white",noOfLines:1,textAlign:"left",children:t.collectionName}),(0,i.jsx)(eA.Icon,{as:e_.mqA,color:"white",boxSize:2})]})]})},eT=e=>{let{collections:t}=e;return(0,i.jsxs)(s.Flex,{position:"relative",w:"full",overflow:"hidden",bg:"gradient.background",py:5,alignItems:"center",justifyContent:"center",children:[(0,i.jsx)(s.Flex,{justify:"center",align:"center",h:"full",gap:3,overflowX:"hidden",children:t.slice(0,7).map(e=>(0,i.jsx)(eE,{collection:e},e.id))}),t.length>=7&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.Box,{position:"absolute",top:0,left:0,right:0,bottom:0,width:"5rem",bg:"linear-gradient(272.51deg, rgba(2, 4, 6, 0) 1.9%, #030407 97.77%)"}),(0,i.jsx)(k.Box,{position:"absolute",top:0,right:0,bottom:0,width:"5rem",bg:"linear-gradient(90deg, rgba(2, 4, 6, 0) 0%, #06080D 100%)"})]})]})};var eM=n(74702),eR=n(19022),eF=n(93322),ez=n(89929);let eL={INITIAL:"RemoveCollectionsOnlyView",CONFIRMATION:"RemoveEverywhereView"},eN={[eL.INITIAL]:e=>{let{onClose:t,onRemove:n,onViewChange:l,isDeleteEverywhereEnabled:o,deleteEverywhere:r,onDeleteEverywhereChange:a,onPaymentOptionsOpen:s}=e,[d,c]=(0,g.useState)(!1),{selectedCollections:u}=(0,X._Q)(),m=e=>{if(a(e),e){if(o){l(eL.CONFIRMATION);return}s(),a(!1);return}},h=async()=>{try{c(!0),await n(!1)}finally{c(!1)}};return(0,i.jsx)(eo.ModalBody,{p:0,children:(0,i.jsxs)(ea.VStack,{gap:6,children:[(0,i.jsx)(ej.A,{boxSize:12}),(0,i.jsx)(es.Heading,{fontSize:{base:"lg",sm:"2xl"},fontWeight:"semibold",children:"Are you sure you want to remove this content?"}),(0,i.jsx)(I.Text,{fontSize:{base:"sm",sm:"lg"},fontWeight:"normal",color:"content.secondary",children:"Removing collections is permanent. Original images remain in generations. To remove images permanently, check the box below."}),(0,i.jsx)(eT,{collections:u}),(0,i.jsx)(w.Tooltip,{isDisabled:o,hasArrow:!0,closeOnClick:!1,label:"Unlock image deletion and more with Leonardo Premium!",placement:"top",bgColor:"button.input",textAlign:"center",children:(0,i.jsxs)(ed.HStack,{gap:2,children:[(0,i.jsx)(eR.S,{id:"remove-everywhere-id",size:"sm",className:"border-2",checked:r,onCheckedChange:e=>m(e)}),(0,i.jsx)(eF.J,{htmlFor:"remove-everywhere-id",className:"text-sm md:text-lg",children:"Delete Everywhere"}),!o&&(0,i.jsx)(ep.IconButton,{"aria-label":"Upgrade",size:"xs",bg:"gradient.main",color:"content.primary",rounded:"md",onClick:s,icon:(0,i.jsx)(O.A,{boxSize:5})})]})}),(0,i.jsxs)(eb.Stack,{direction:{base:"column",sm:"row"},gap:4,py:4,width:"full",children:[(0,i.jsx)(eM.$,{size:"lg",variant:"outline",onClick:t,disabled:d,className:"w-full p-4",children:"Cancel"}),(0,i.jsx)(eM.$,{size:"lg",loading:d,variant:"gradientOutline",className:"w-full p-4",onClick:h,children:"Remove All"})]})]})})},[eL.CONFIRMATION]:e=>{let{onClose:t,onRemove:n,onDeleteEverywhereChange:l,deleteEverywhere:o,onViewChange:r}=e,{selectedCollections:a}=(0,X._Q)(),[s,d]=(0,g.useState)(!1),c=async()=>{try{d(!0),await n(!0)}finally{d(!1)}},u=e=>{l(e),e||r(eL.INITIAL)};return(0,i.jsx)(eo.ModalBody,{p:0,children:(0,i.jsxs)(ea.VStack,{gap:6,children:[(0,i.jsx)(eu.A,{boxSize:12}),(0,i.jsx)(es.Heading,{fontSize:{base:"lg",sm:"2xl"},fontWeight:"semibold",children:"Are you sure you want to delete everywhere?"}),(0,i.jsxs)(I.Text,{fontSize:{base:"sm",sm:"lg"},fontWeight:"normal",color:"content.secondary",children:["All selected content including collections, sub-collections images and variations will be ",(0,i.jsx)("strong",{children:"permanently deleted"}),"."]}),(0,i.jsx)(eT,{collections:a}),(0,i.jsxs)(ed.HStack,{gap:2,children:[(0,i.jsx)(eR.S,{id:"remove-everywhere-id",size:"sm",className:"border-2",checked:o,onCheckedChange:e=>u(e)}),(0,i.jsx)(eF.J,{htmlFor:"remove-everywhere-id",className:"text-sm md:text-lg",children:"Delete Everywhere"})]}),(0,i.jsxs)(eb.Stack,{direction:{base:"column",sm:"row"},gap:4,py:4,width:"full",justifyContent:"center",children:[(0,i.jsx)(eM.$,{size:"lg",variant:"outline",onClick:t,disabled:s,className:"w-full p-4",children:"Cancel"}),(0,i.jsxs)(eM.$,{size:"lg",loading:s,onClick:c,variant:"destructive",className:"w-full p-4",children:[(0,i.jsx)(F.A,{boxSize:6}),"Delete Everywhere"]})]})]})})}},eP=e=>{let{isOpen:t,onClose:n,handleRemoveCollections:l}=e,[r,a]=(0,g.useState)(!1),[s,d]=(0,g.useState)(eL.INITIAL),{isOpen:c,onClose:u,onOpen:m}=(0,o.useDisclosure)(),{selectedCollections:h,clearSelectedCollections:x}=(0,X._Q)(),{selectedImages:p,clearSelectedImages:b}=(0,P.V)(),{toast:f}=(0,ez.x)(),{hasPermission:v}=(0,D.S)(),j=v("bulkDelete","create"),w=async e=>{if(e&&!j){m();return}try{await l(h.map(e=>e.id),p.map(e=>e.id),e),x(),b(),a(!1),n(),d(eL.INITIAL)}catch(e){f({title:"Error",description:e instanceof Error?e.message:"An unexpected error occurred while removing content",status:"error",type:"floating",position:"top",duration:5e3,isClosable:!0})}},C=eN[s];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(en.Modal,{isOpen:t,onClose:n,children:[(0,i.jsx)(ei.ModalOverlay,{}),(0,i.jsx)(el.ModalContent,{w:"full",maxW:"45rem",bg:"gradient.background",p:{base:6,sm:11},textAlign:"center",children:(0,i.jsx)(C,{onClose:()=>{n(),d(eL.INITIAL)},onRemove:w,onPaymentOptionsOpen:m,isDeleteEverywhereEnabled:j,deleteEverywhere:r,onDeleteEverywhereChange:a,onViewChange:d})})]}),(0,i.jsx)(ek.default,{isOpen:c,onClose:u})]})};var eW=n(64679);let eH=e=>(0,i.jsxs)(eA.Icon,{viewBox:"0 0 17 16",fill:"none",...e,children:[(0,i.jsx)("path",{d:"M7.97279 8.2233C8.04646 8.4007 8.04646 8.60136 7.97279 8.77876C7.93595 8.86794 7.88276 8.94839 7.81588 9.01528L5.8771 10.9541C5.73557 11.0956 5.54942 11.1673 5.3633 11.1673C5.17718 11.1673 4.99103 11.0966 4.8495 10.9541C4.56547 10.67 4.56547 10.2096 4.8495 9.92553L5.54743 9.22757H1.08056C0.679229 9.22757 0.353516 8.90185 0.353516 8.50053C0.353516 8.0992 0.679229 7.77349 1.08056 7.77349H5.54648L4.84855 7.07553C4.56452 6.7915 4.56452 6.33104 4.84855 6.04701C5.13258 5.76298 5.59307 5.76298 5.8771 6.04701L7.81588 7.98578C7.88276 8.05461 7.93595 8.13509 7.97279 8.2233Z",fill:"currentColor"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.37398 4.16669H12.5C14.112 4.16669 14.9999 5.05469 15.0006 6.66669V11.3334C15.0006 12.9454 14.1126 13.8334 12.5006 13.8334H4.50061C2.88861 13.8334 2.00061 12.9454 2.00061 11.3334V10.5007H2.99996V11.3334C2.99996 12.3847 3.44863 12.8334 4.49996 12.8334H12.5C13.5513 12.8334 14 12.3847 14 11.3334L13.9993 6.66669C13.9993 5.61535 13.5506 5.16669 12.4993 5.16669H9.16597C9.03331 5.16669 8.90662 5.11402 8.81262 5.02002L6.95927 3.16669H4.49996C3.44863 3.16669 2.99996 3.61535 2.99996 4.66669V6.50067H2.00061V4.66669C2.00061 3.05469 2.88861 2.16669 4.50061 2.16669H7.16728C7.29994 2.16669 7.42663 2.21935 7.52063 2.31335L9.37398 4.16669Z",fill:"currentColor"})]});var eV=n(11819),eG=n(98371),eU=n(88095),eQ=n(4414);let eY=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{update:t,...n}=e,[i,l]=(0,eU.n)(eB.oLr,{...n,update(e,n,i){var l,o;let r=(0,eQ.E)(e),a=!1;null==n||null===(o=n.data)||void 0===o||null===(l=o.delete_generations)||void 0===l||l.returning.forEach(t=>{a=(0,eQ.i)(e,r,t.id)||a;let n=e.identify({id:t.id,__typename:"generations"}),i=e.evict({id:n});a||(a=i)}),a&&e.gc(),null==t||t(e,n,i)}});return[(0,g.useCallback)((e,t)=>i({variables:{ids:e},...t}),[i]),l]},e$=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{update:t,...n}=e,[i,l]=(0,eU.n)(eB.LVx,{...n,update(e,n,i){var l,o;null===(o=n.data)||void 0===o||null===(l=o.delete_generated_images)||void 0===l||l.returning.forEach(t=>{let n=e.identify({id:t.id,__typename:"generated_images"});e.evict({id:n})}),null==t||t(e,n,i)}});return[(0,g.useCallback)(e=>i({variables:{ids:e}}),[i]),l]};var eq=n(89444),eJ=n(45269);let eK=(0,u.default)(()=>Promise.resolve().then(n.bind(n,5136)).then(e=>e.default),{loadableGenerated:{webpack:()=>[5136]}}),eZ=e=>e.reduce((e,t)=>{var n;return e+((null===(n=t.variations)||void 0===n?void 0:n.length)||0)},0),eX=(e,t)=>{let n=eZ(t);return"Are you sure you want to delete ".concat(b(e)).concat(f(n),"?")},e0=e=>{let t,{showCollectionTree:n,collection:u,onConfirmationClose:p,onDeleteCallback:b,pl:f={base:2,md:6},pr:v={base:2,md:6}}=e,{isOpen:w,onClose:C,onOpen:y}=(0,o.useDisclosure)(),{isOpen:I,onClose:k,onOpen:S}=(0,o.useDisclosure)(),{isOpen:A,onClose:_,onOpen:O}=(0,o.useDisclosure)(),{isOpen:B,onClose:E,onOpen:T}=(0,o.useDisclosure)(),R=(0,$.w)(),{userSelectedTeam:F}=(0,U.s)(),L=!!F(),W=(0,eJ.A)(),{hasPermission:H}=(0,D.S)(),V=H("generation","delete"),Q=H("bulkDownload","create"),{isCreatingCollectionImages:Y,isDeletingCollectionImages:q,isUpdatingCollectionsLoading:J,handleAddCollectionImage:K,handleRemoveCollectionImage:ee,deleteCollection:en}=(0,eV.A)(),{showCollectionImagesToast:ei}=(0,eG.A)(),{isSelectingImages:el,selectedImages:eo,setIsSelectingImages:er,clearSelectedImages:ea}=(0,P.V)(),{selectedCollections:es}=(0,X._Q)(),{isLibraryCollections:ed,isTeamFeedYourCollections:ec,isTeamFeedTeamCollections:eu}=(0,eq.G)(),{openCollectionPrivacyWarning:em}=(0,N.o)(),eg=(0,r.useToast)(),ex=(0,g.useCallback)(()=>{null==p||p(),ea(),er(!1),b(),C(),k(),_(),E()},[ea,p,b,C,k,_,E,er]),[ep,{loading:eb}]=e$({onCompleted:ex}),[ef,{loading:ev}]=eY({onCompleted:ex}),{isBulkDownloadOfCollectionsEnabled:ej,isBulkDeleteOfCollectionsEnabled:ew}=(0,G.D)(),eC=H("bulkDownload","create"),{download:ey,isDownloading:ek}=(0,eW.rC)({images:eo,includeVariations:!1,filename:"original_images",collectionIds:ej&&eC?es.map(e=>e.id):[]}),{download:eS,isDownloading:eA}=(0,eW.rC)({images:eo,includeVariations:!0,filename:"all_images",collectionIds:ej&&eC?es.map(e=>e.id):[]}),[e_]=(0,l._)(eB.J02,{}),eO=async(e,t,n)=>{try{for(let t=0;t<e.length;t+=8){let i=e.slice(t,t+8);(await Promise.allSettled(i.map(e=>en(BigInt(e),n)))).forEach(e=>{"rejected"===e.status&&c.Cp(e.reason)})}await ep(t),k()}catch(e){c.Cp(e),eg({title:"Error deleting items",description:"Some items could not be deleted. Please try again.",status:"error",duration:5e3,isClosable:!0})}},eE=async()=>{let e=eo.map(e=>e.id),t=new Set,n=[];if(e.length>0){for(let e of eo)e.generationId&&t.add(e.generationId);await ep(e);let l=Array.from(t);if(l)for(let e of l){var i;let{data:t}=await e_({variables:{generationId:e},fetchPolicy:"network-only"});0===((null==t?void 0:null===(i=t.generated_images_aggregate.aggregate)||void 0===i?void 0:i.count)||0)&&n.push(e)}}n.length>0&&ef(n,{refetchQueries:[{query:eB.NO$,variables:{where:{userId:{_eq:R}}}}]})},eT=async e=>{e&&eo&&await ee(e,eo,(e,t,n,i)=>{ei(e,t,n,i),_()})},eM=async(e,t)=>{e&&t&&await K(e,t,(e,t,n,i)=>ei(e,t,n,i))},eR=async(e,t)=>{e&&(eo.find(e=>!e.isPublic)&&L&&t&&em(),t?await eM(e,eo):await eT(e))},eF=eo.length,ez=es.length,eL=ed||ec||eu,eN=eL&&es.length,eU=eZ(eo),eQ=(0,m.useParams)();eL&&(t=Array.isArray(null==eQ?void 0:eQ.id)?null==eQ?void 0:eQ.id[0]:null==eQ?void 0:eQ.id);let[e0,e1]=(0,g.useState)(!1),e5=(0,g.useCallback)(e=>{e1(e)},[]);return!e0||eo.length||es.length||e1(!1),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(a.Collapse,{in:el,animateOpacity:!0,style:{zIndex:1},children:[(0,i.jsxs)(s.Flex,{bg:"#181F2F",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",rowGap:2,columnGap:2,py:2,pl:f,pr:v,children:[(0,i.jsx)(s.Flex,{display:{base:"none","2xl":"flex"},alignItems:"center",fontSize:"sm",whiteSpace:"nowrap",children:(0,i.jsx)(j,{imageCount:eF,variationsCount:eU,collectionsCount:es.length})}),(0,i.jsxs)(s.Flex,{gap:2,flexWrap:"wrap",display:{base:"grid","2xl":"flex"},gridTemplateColumns:{base:"1fr",sm:"1fr 1fr",md:"repeat(auto-fit, minmax(10rem, 1fr))",lg:"1fr 1fr 1fr"},justifyContent:{base:"flex-start",lg:"flex-end","2xl":"flex-end"},flex:1,children:[(0,i.jsx)(s.Flex,{display:{base:"flex","2xl":"none"},alignItems:"center",fontSize:"sm",whiteSpace:"nowrap",children:(0,i.jsx)(j,{imageCount:eF,variationsCount:eU,collectionsCount:es.length})}),(!V||!Q)&&(0,i.jsx)(d.Button,{onClick:T,variant:"gradient",fontWeight:"semibold",borderRadius:"1.875rem",size:"sm",w:{base:"full",sm:20},height:8,color:"white",transition:"none",justifySelf:"flex-end",children:"Upgrade"}),(0,i.jsx)(Z,{openBuyModal:T}),n&&(eN?(0,i.jsx)(h.f,{displayText:"Move to",icon:(0,i.jsx)(eH,{boxSize:4.5,mr:2}),mode:x.v1.MOVE,textAlign:"center",selectedImages:eo,onCollectionChecked:eR,currentCollectionId:t,isOpen:e0,onOpenChange:e5,closeModalOnEmptySelection:!0}):(0,i.jsx)(h.f,{displayText:"Organize",rounded:"lg",icon:(0,i.jsx)(eD.A,{boxSize:4.5,mr:2}),mode:x.v1.UPDATE,textAlign:"center",selectedImages:eo,onCollectionChecked:eR,currentCollectionId:t,isOpen:e0,onOpenChange:e5,closeModalOnEmptySelection:!0})),(0,i.jsx)(M,{isLoading:ek||eA,onDownloadOriginalImages:ey,onDownloadAllImages:eS,imageCount:eF,collectionCount:ej?es.length:0,handleOpenBuyModal:T,width:"100%"}),(0,i.jsx)(z,{imagesCount:eF,collectionsCount:ez,isCollectionPage:eL,onPaymentOptionsOpen:T,onDeleteImagesOpen:y,onRemoveCollectionImagesOpen:O,justifyContent:"center",onRemoveCollectionsContentOpen:S,canTeamMemberDelete:L?(()=>{let e=eo.some(e=>e.userId!==R);return!!W||!e})():null}),(0,i.jsx)(et,{})]})]}),(0,i.jsx)(eh,{title:eX(eF,eo),isOpen:w,onClose:C,deleteImage:eE,loading:eb||ev||J||Y||q}),(0,i.jsx)(eI,{isOpen:A,onClose:_,deleteImage:eE,removeImage:()=>eT(u)}),ew&&(0,i.jsx)(eP,{isOpen:I,onClose:k,handleRemoveCollections:eO}),B&&(0,i.jsx)(g.Suspense,{children:(0,i.jsx)(eK,{isOpen:B,onClose:E})})]})})}}}]);